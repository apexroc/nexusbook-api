<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>变更日志 - NexusBook API 文档</title>
    <link rel="stylesheet" href="/styles/main.css?v=${Date.now()}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>
    <script>
      if (window.hljs) { hljs.highlightAll(); }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</head>
<body class="has-sidebar">
    <nav class="sidebar">
<div class="sidebar-header">
<a href="/index.html" class="sidebar-logo">NexusBook API</a>
</div>
<div class="sidebar-content">
<div class="sidebar-group expanded">
<div class="sidebar-group-title">开始使用</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/index.html">概览</a>
</li>
<li class="sidebar-item ">
<a href="/guides/getting-started.html">快速开始</a>
</li>
<li class="sidebar-item ">
<a href="/guides/authentication.html">认证授权</a>
</li>
</ul>
</div>
<div class="sidebar-group expanded">
<div class="sidebar-group-title">核心概念</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/guides/document-model.html">文档模型</a>
</li>
<li class="sidebar-item ">
<a href="/guides/data-operations.html">数据操作</a>
</li>
<li class="sidebar-item ">
<a href="/guides/webhooks.html">Webhook 事件</a>
</li>
<li class="sidebar-item ">
<a href="/guides/realtime-collaboration.html">实时协同</a>
</li>
</ul>
</div>
<div class="sidebar-group expanded">
<div class="sidebar-group-title">API 参考</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/api/index.html">API 端点</a>
</li>
<li class="sidebar-item ">
<a href="/references/field-types.html">字段类型</a>
</li>
<li class="sidebar-item ">
<a href="/references/error-codes.html">错误码</a>
</li>
</ul>
</div>
<div class="sidebar-group ">
<div class="sidebar-group-title">开发指南</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/guides/development.html">开发环境</a>
</li>
<li class="sidebar-item ">
<a href="/guides/architecture.html">架构设计</a>
</li>
<li class="sidebar-item ">
<a href="/guides/best-practices.html">最佳实践</a>
</li>
<li class="sidebar-item ">
<a href="/guides/examples.html">完整示例</a>
</li>
</ul>
</div>
<div class="sidebar-group ">
<div class="sidebar-group-title">其他资源</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/references/i18n.html">国际化</a>
</li>
<li class="sidebar-item ">
<a href="/references/changelog.html">更新日志</a>
</li>
<li class="sidebar-item ">
<a href="/CONTRIBUTING.html">贡献指南</a>
</li>
<li class="sidebar-item ">
<a href="/TROUBLESHOOTING.html">问题排查</a>
</li>
</ul>
</div>
</div>
</nav>

    
    <div class="main-wrapper">
        <header class="header">
            <div class="container">
                <h1 class="logo"><a href="/index.html">NexusBook API</a></h1>
                <nav class="nav">
                    <a href="/index.html">首页</a>
                    <a href="/api/" >API 参考</a>
                    <a href="/guides/getting-started.html" >开发指南</a>
                    <a href="/references/error-codes.html" class="active">参考文档</a>
                    <a href="https://github.com/NexusBook/nexusbook-api" target="_blank">GitHub</a>
                </nav>
            </div>
        </header>

        <main class="main content-page">
            <div class="container">
                <article class="content">
                    <h1>变更日志</h1>
<p>本文档记录 NexusBook API 的主要功能变更和版本历史。</p>
<h2>版本 1.0.0（当前版本）</h2>
<p><strong>发布日期</strong>：2024-12-01</p>
<h3>核心功能</h3>
<h4>📊 文档与数据管理</h4>
<ul>
<li>✅ 统一的文档抽象（Document Model）</li>
<li>✅ 25+ 种字段类型支持</li>
<li>✅ 强大的数据查询能力（过滤、排序、分组、聚合）</li>
<li>✅ Properties（文档属性）管理</li>
<li>✅ Metadata（元数据）管理</li>
<li>✅ 数据行 CRUD 操作</li>
<li>✅ 批量操作支持</li>
</ul>
<h4>👁️ 视图系统</h4>
<ul>
<li>✅ 8 种视图类型（Table, Gallery, Kanban, Calendar, Chart, Form, Map, Timeline）</li>
<li>✅ 自定义过滤和排序</li>
<li>✅ 视图配置管理</li>
<li>✅ 默认视图设置</li>
</ul>
<h4>💬 协作功能</h4>
<ul>
<li>✅ 统一评论系统（支持文档/字段/行/单元格级别）</li>
<li>✅ @提及功能</li>
<li>✅ 评论回复和讨论线程</li>
<li>✅ 表情反应</li>
<li>✅ 置顶和解决标记</li>
</ul>
<h4>🔄 版本控制</h4>
<ul>
<li>✅ Request（变更请求）机制</li>
<li>✅ Revision（修订历史）追踪</li>
<li>✅ 版本对比（diff）</li>
<li>✅ 回滚功能</li>
<li>✅ 并发控制（乐观锁）</li>
</ul>
<h4>✅ 审批工作流</h4>
<ul>
<li>✅ 多层级审批流程</li>
<li>✅ 审批决策（通过/拒绝/请求修改）</li>
<li>✅ 完整的审批历史</li>
<li>✅ 基于角色的权限控制</li>
</ul>
<h4>🔐 认证与授权</h4>
<ul>
<li>✅ OAuth2 客户端凭证流程</li>
<li>✅ OAuth2 授权码流程</li>
<li>✅ OIDC 集成</li>
<li>✅ JWT Token 管理</li>
<li>✅ 基于 Scope 的权限控制</li>
<li>✅ JWKS 端点支持</li>
</ul>
<h4>🔔 Webhooks</h4>
<ul>
<li>✅ 20+ 种事件类型</li>
<li>✅ HMAC-SHA256 签名验证</li>
<li>✅ 自动重试机制</li>
<li>✅ 事件过滤</li>
<li>✅ 投递历史查询</li>
<li>✅ 测试端点</li>
</ul>
<h3>API 端点</h3>
<h4>文档管理</h4>
<ul>
<li><code>GET /doc/{doc-type}/{doc-id}</code> - 聚合查询</li>
<li><code>GET/POST/PUT/PATCH/DELETE /doc/{doc-type}/{doc-id}/properties</code> - 属性管理</li>
<li><code>GET/PUT /doc/{doc-type}/{doc-id}/metadata</code> - 元数据管理</li>
<li><code>GET/POST/PUT/DELETE /doc/{doc-type}/{doc-id}/views/*</code> - 视图管理</li>
<li><code>GET/POST/PUT/DELETE /doc/{doc-type}/{doc-id}/data/*</code> - 数据管理</li>
<li><code>GET/POST/PUT/DELETE /doc/{doc-type}/{doc-id}/comments/*</code> - 评论管理</li>
</ul>
<h4>版本控制</h4>
<ul>
<li><code>GET/POST /doc/{doc-type}/{doc-id}/requests/*</code> - 变更请求</li>
<li><code>GET /doc/{doc-type}/{doc-id}/revisions/*</code> - 修订历史</li>
</ul>
<h4>审批流程</h4>
<ul>
<li><code>GET/POST /doc/{doc-type}/{doc-id}/approval/*</code> - 审批管理</li>
</ul>
<h4>认证授权</h4>
<ul>
<li><code>GET /auth/authorize</code> - 授权端点</li>
<li><code>POST /auth/token</code> - 令牌颁发</li>
<li><code>GET /auth/userinfo</code> - 用户信息</li>
<li><code>GET /auth/.well-known/openid-configuration</code> - OIDC 发现</li>
<li><code>GET /auth/jwks.json</code> - 公钥集合</li>
</ul>
<h4>Webhooks</h4>
<ul>
<li><code>GET/POST/PUT/DELETE /webhooks/*</code> - Webhook 管理</li>
<li><code>POST /webhooks/{id}/pause</code> - 暂停</li>
<li><code>POST /webhooks/{id}/resume</code> - 恢复</li>
<li><code>POST /webhooks/{id}/test</code> - 测试</li>
<li><code>GET /webhooks/{id}/deliveries/*</code> - 投递管理</li>
</ul>
<h3>技术栈</h3>
<ul>
<li><strong>API 定义</strong>: TypeSpec 1.6.0</li>
<li><strong>规范</strong>: OpenAPI 3.0</li>
<li><strong>文档生成</strong>: Redocly</li>
<li><strong>认证</strong>: OAuth2 &amp; OIDC</li>
<li><strong>Token</strong>: JWT</li>
</ul>
<h3>已知限制</h3>
<ul>
<li>单次批量操作最多支持 1000 行数据</li>
<li>Webhook 投递超时时间为 30 秒</li>
<li>Token 默认有效期为 1 小时</li>
<li>API 请求频率限制：100 请求/分钟</li>
</ul>
<h2>即将推出</h2>
<h3>版本 1.1.0（计划中）</h3>
<ul>
<li>🔜 实时协作（WebSocket 支持）</li>
<li>🔜 数据导入导出增强（支持更多格式）</li>
<li>🔜 自定义函数支持</li>
<li>🔜 更多视图类型（Gantt、Timeline）</li>
<li>🔜 高级权限管理（行级权限）</li>
</ul>
<h3>版本 1.2.0（规划中）</h3>
<ul>
<li>🔜 API 版本控制（v2）</li>
<li>🔜 GraphQL 支持</li>
<li>🔜 数据备份和恢复</li>
<li>🔜 审计日志增强</li>
<li>🔜 性能优化（缓存层）</li>
</ul>
<h2>API 兼容性</h2>
<h3>版本策略</h3>
<p>NexusBook API 遵循语义化版本控制（SemVer）：</p>
<ul>
<li><strong>主版本号</strong>（Major）：不兼容的 API 变更</li>
<li><strong>次版本号</strong>（Minor）：向后兼容的功能新增</li>
<li><strong>修订号</strong>（Patch）：向后兼容的问题修复</li>
</ul>
<h3>废弃政策</h3>
<ul>
<li>API 废弃将提前至少 6 个月通知</li>
<li>废弃的 API 将在响应头中标记 <code>X-API-Deprecated: true</code></li>
<li>建议及时迁移到新的 API</li>
</ul>
<h3>破坏性变更</h3>
<p>目前版本 1.0.0 为首个正式版本，暂无破坏性变更。</p>
<h2>迁移指南</h2>
<h3>从 Beta 版本迁移</h3>
<p>如果您使用的是 Beta 版本，请注意以下变更：</p>
<h4>1. 响应格式统一</h4>
<p><strong>旧格式</strong>（Beta）：</p>
<pre><code class="language-json">{
  &quot;data&quot;: {...},
  &quot;error&quot;: null
}
</code></pre>
<p><strong>新格式</strong>（v1.0）：</p>
<pre><code class="language-json">{
  &quot;success&quot;: true,
  &quot;payload&quot;: {...}
}
</code></pre>
<h4>2. 多语言消息</h4>
<p><strong>旧格式</strong>（Beta）：</p>
<pre><code class="language-json">{
  &quot;message&quot;: {
    &quot;zh&quot;: &quot;...&quot;,
    &quot;en&quot;: &quot;...&quot;
  }
}
</code></pre>
<p><strong>新格式</strong>（v1.0）：支持任意语言代码</p>
<pre><code class="language-json">{
  &quot;message&quot;: {
    &quot;zh&quot;: &quot;...&quot;,
    &quot;en&quot;: &quot;...&quot;,
    &quot;ja&quot;: &quot;...&quot;,
    &quot;ko&quot;: &quot;...&quot;
  }
}
</code></pre>
<h4>3. 评论 API 统一</h4>
<p>Beta 版本中评论 API 分散在不同端点，v1.0 统一到：</p>
<pre><code>POST /doc/{doc-type}/{doc-id}/comments
</code></pre>
<p>使用 <code>target</code> 参数指定位置：</p>
<pre><code class="language-json">{
  &quot;target&quot;: {
    &quot;scope&quot;: &quot;cell&quot;,
    &quot;rowId&quot;: &quot;row-001&quot;,
    &quot;fieldId&quot;: &quot;price&quot;
  },
  &quot;content&quot;: &quot;...&quot;
}
</code></pre>
<h2>获取最新信息</h2>
<ul>
<li>📚 <a href="../api/index.html">API 文档</a></li>
<li>🐛 <a href="https://github.com/NexusBook/nexusbook-api/issues">问题反馈</a></li>
<li>💬 <a href="https://github.com/NexusBook/nexusbook-api/discussions">讨论区</a></li>
<li>📢 <a href="https://github.com/NexusBook/nexusbook-api/releases">发布说明</a></li>
</ul>
<h2>贡献</h2>
<p>欢迎提交问题报告、功能建议和代码贡献！</p>
<ul>
<li>提交 Issue：<a href="https://github.com/NexusBook/nexusbook-api/issues">GitHub Issues</a></li>
<li>功能请求：<a href="https://github.com/NexusBook/nexusbook-api/discussions">GitHub Discussions</a></li>
</ul>
<hr>
<p>最后更新：2024-12-01</p>

                </article>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 NexusBook. 基于 TypeSpec 定义并生成 OpenAPI 3.0 规范。</p>
            </div>
        </footer>
    </div>
</body>
</html>