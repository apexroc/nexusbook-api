<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API å‚è€ƒæ‰‹å†Œ - NexusBook API æ–‡æ¡£</title>
    <link rel="stylesheet" href="/styles/main.css?v=${Date.now()}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>
    <script>
      if (window.hljs) { hljs.highlightAll(); }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</head>
<body class="has-sidebar">
    <nav class="sidebar">
<div class="sidebar-header">
<a href="/index.html" class="sidebar-logo">NexusBook API</a>
</div>
<div class="sidebar-content">
<div class="sidebar-group expanded">
<div class="sidebar-group-title">å¼€å§‹ä½¿ç”¨</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/index.html">æ¦‚è§ˆ</a>
</li>
<li class="sidebar-item ">
<a href="/guides/getting-started.html">å¿«é€Ÿå¼€å§‹</a>
</li>
<li class="sidebar-item ">
<a href="/guides/authentication.html">è®¤è¯æˆæƒ</a>
</li>
</ul>
</div>
<div class="sidebar-group expanded">
<div class="sidebar-group-title">æ ¸å¿ƒæ¦‚å¿µ</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/guides/document-model.html">æ–‡æ¡£æ¨¡å‹</a>
</li>
<li class="sidebar-item ">
<a href="/guides/data-operations.html">æ•°æ®æ“ä½œ</a>
</li>
<li class="sidebar-item ">
<a href="/guides/webhooks.html">Webhook äº‹ä»¶</a>
</li>
<li class="sidebar-item ">
<a href="/guides/realtime-collaboration.html">å®æ—¶ååŒ</a>
</li>
</ul>
</div>
<div class="sidebar-group expanded">
<div class="sidebar-group-title">API å‚è€ƒ</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/api/index.html">API ç«¯ç‚¹</a>
</li>
<li class="sidebar-item ">
<a href="/references/field-types.html">å­—æ®µç±»å‹</a>
</li>
<li class="sidebar-item ">
<a href="/references/error-codes.html">é”™è¯¯ç </a>
</li>
</ul>
</div>
<div class="sidebar-group ">
<div class="sidebar-group-title">å¼€å‘æŒ‡å—</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/guides/development.html">å¼€å‘ç¯å¢ƒ</a>
</li>
<li class="sidebar-item ">
<a href="/guides/architecture.html">æ¶æ„è®¾è®¡</a>
</li>
<li class="sidebar-item ">
<a href="/guides/best-practices.html">æœ€ä½³å®è·µ</a>
</li>
<li class="sidebar-item ">
<a href="/guides/examples.html">å®Œæ•´ç¤ºä¾‹</a>
</li>
</ul>
</div>
<div class="sidebar-group ">
<div class="sidebar-group-title">å…¶ä»–èµ„æº</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/references/i18n.html">å›½é™…åŒ–</a>
</li>
<li class="sidebar-item ">
<a href="/references/changelog.html">æ›´æ–°æ—¥å¿—</a>
</li>
<li class="sidebar-item ">
<a href="/CONTRIBUTING.html">è´¡çŒ®æŒ‡å—</a>
</li>
<li class="sidebar-item ">
<a href="/TROUBLESHOOTING.html">é—®é¢˜æ’æŸ¥</a>
</li>
</ul>
</div>
</div>
</nav>

    
    <div class="main-wrapper">
        <header class="header">
            <div class="container">
                <h1 class="logo"><a href="/index.html">NexusBook API</a></h1>
                <nav class="nav">
                    <a href="/index.html">é¦–é¡µ</a>
                    <a href="/api/" >API å‚è€ƒ</a>
                    <a href="/guides/getting-started.html" >å¼€å‘æŒ‡å—</a>
                    <a href="/advanced/README.html" >é«˜çº§æ‰‹å†Œ</a>
                    <a href="/references/error-codes.html" class="active">å‚è€ƒæ–‡æ¡£</a>
                    <a href="https://github.com/NexusBook/nexusbook-api" target="_blank">GitHub</a>
                </nav>
            </div>
        </header>

        <main class="main content-page">
            <div class="container">
                <article class="content">
                    <h1>API å‚è€ƒæ‰‹å†Œ</h1>
<p>å®Œæ•´çš„ NexusBook API ç«¯ç‚¹å‚è€ƒæ–‡æ¡£ã€‚</p>
<h2>åŸºæœ¬ä¿¡æ¯</h2>
<table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>API åŸºå€</strong></td>
<td><code>https://open.nexusbook.app/api/v1</code></td>
</tr>
<tr>
<td><strong>è®¤è¯åŸŸå</strong></td>
<td><code>https://auth.nexusbook.app</code></td>
</tr>
<tr>
<td><strong>API è§„èŒƒ</strong></td>
<td>OpenAPI 3.0</td>
</tr>
<tr>
<td><strong>æ¶æ„é£æ ¼</strong></td>
<td>RESTful</td>
</tr>
</tbody></table>
<h2>ç»Ÿä¸€å“åº”æ ¼å¼</h2>
<p>æ‰€æœ‰ API è¿”å›ç»Ÿä¸€çš„ <code>ApiResponse&lt;T&gt;</code> ç»“æ„ï¼š</p>
<pre><code class="language-typescript">{
  success: boolean,           // æ˜¯å¦æˆåŠŸ
  code?: ErrorCode,          // é”™è¯¯ç ï¼ˆå¤±è´¥æ—¶ï¼‰
  message?: Record&lt;string, string&gt;,  // å¤šè¯­è¨€æ¶ˆæ¯ï¼ˆçµæ´»çš„è¯­è¨€ä»£ç æ˜ å°„ï¼‰
  payload?: T | null         // å®é™…æ•°æ®è½½è·
}
</code></pre>
<h3>å¤šè¯­è¨€æ¶ˆæ¯è¯´æ˜</h3>
<p><code>message</code> å­—æ®µä½¿ç”¨ ISO 639-1 è¯­è¨€ä»£ç ä½œä¸ºé”®ï¼Œæ”¯æŒä»»æ„è¯­è¨€æ‰©å±•ã€‚å¸¸ç”¨è¯­è¨€ä»£ç ï¼š</p>
<ul>
<li><code>zh</code>: ä¸­æ–‡</li>
<li><code>en</code>: English</li>
<li><code>ja</code>: æ—¥æœ¬èª</li>
<li><code>ko</code>: í•œêµ­ì–´</li>
<li><code>es</code>: EspaÃ±ol</li>
<li><code>fr</code>: FranÃ§ais</li>
<li><code>de</code>: Deutsch</li>
<li><code>pt</code>: PortuguÃªs</li>
<li><code>ru</code>: Ğ ÑƒÑÑĞºĞ¸Ğ¹</li>
<li><code>ar</code>: Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-json">{
  &quot;success&quot;: false,
  &quot;code&quot;: &quot;DOC_NOT_FOUND&quot;,
  &quot;message&quot;: {
    &quot;zh&quot;: &quot;æ–‡æ¡£ä¸å­˜åœ¨&quot;,
    &quot;en&quot;: &quot;Document not found&quot;,
    &quot;ja&quot;: &quot;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“&quot;
  },
  &quot;payload&quot;: null
}
</code></pre>
<h2>æ ¸å¿ƒç«¯ç‚¹</h2>
<h3>1. èšåˆæŸ¥è¯¢</h3>
<pre><code class="language-http">GET /api/v1/doc/{doc-type}/{doc-id}?include=metadata,views,data,comments,revisions,settings
</code></pre>
<p>ä¸€æ¬¡æ€§è·å–æ–‡æ¡£æ‰€éœ€çš„å¤šç§æ•°æ®ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ã€‚</p>
<p><strong>æŸ¥è¯¢å‚æ•°ï¼š</strong></p>
<ul>
<li><code>include</code> - åŒ…å«çš„æ•°æ®éƒ¨åˆ†ï¼ˆé€—å·åˆ†éš”ï¼‰<ul>
<li><code>metadata</code> - å­—æ®µå®šä¹‰</li>
<li><code>views</code> - è§†å›¾åˆ—è¡¨</li>
<li><code>data</code> - æ•°æ®è¡Œ</li>
<li><code>comments</code> - è¯„è®º</li>
<li><code>revisions</code> - ä¿®è®¢å†å²</li>
<li><code>settings</code> - è®¾ç½®</li>
</ul>
</li>
<li><code>viewId</code> - æŒ‡å®šè§†å›¾ ID</li>
<li><code>page</code>, <code>pageSize</code> - åˆ†é¡µå‚æ•°</li>
<li><code>commentsLimit</code>, <code>revisionsLimit</code> - é™åˆ¶æ•°é‡</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># è·å–äº§å“æ–‡æ¡£çš„å…ƒæ•°æ®ã€è§†å›¾å’Œæ•°æ®
curl -H &#39;Authorization: Bearer TOKEN&#39; \
  &#39;https://open.nexusbook.app/api/v1/doc/product/123?include=metadata,views,data&#39;
</code></pre>
<h3>2. æ–‡æ¡£å±æ€§</h3>
<p>ç®¡ç†æ–‡æ¡£çº§å…ƒä¿¡æ¯ï¼ˆè®¢å•æ—¶é—´ã€é—¨åº—ã€é‡‘é¢ã€æ•°é‡ç­‰ï¼‰ã€‚</p>
<pre><code class="language-http"># è·å–æ–‡æ¡£å±æ€§
GET /api/v1/doc/{doc-type}/{doc-id}/properties

# åˆ›å»ºæ–‡æ¡£å±æ€§
POST /api/v1/doc/{doc-type}/{doc-id}/properties

# å®Œå…¨æ›¿æ¢æ–‡æ¡£å±æ€§
PUT /api/v1/doc/{doc-type}/{doc-id}/properties

# éƒ¨åˆ†æ›´æ–°æ–‡æ¡£å±æ€§
PATCH /api/v1/doc/{doc-type}/{doc-id}/properties?merge=true&amp;version=1

# åˆ é™¤æ–‡æ¡£å±æ€§
DELETE /api/v1/doc/{doc-type}/{doc-id}/properties

# è·å–å±æ€§å†å²
GET /api/v1/doc/{doc-type}/{doc-id}/properties/history
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># è·å–è®¢è´§å•å±æ€§
curl -H &#39;Authorization: Bearer TOKEN&#39; \
  &#39;https://open.nexusbook.app/api/v1/doc/purchase/p001/properties&#39;

# æ›´æ–°è®¢è´§å•å±æ€§
curl -X PATCH &#39;https://open.nexusbook.app/api/v1/doc/purchase/p001/properties?merge=true&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;orderDate&quot;: &quot;2024-12-01&quot;,
    &quot;storeName&quot;: &quot;åŒ—äº¬æ——èˆ°åº—&quot;,
    &quot;totalAmount&quot;: 12345.67
  }&#39;
</code></pre>
<h3>3. å…ƒæ•°æ®</h3>
<p>ç®¡ç†å­—æ®µå®šä¹‰ã€ç±»å‹å’ŒéªŒè¯é…ç½®ã€‚</p>
<pre><code class="language-http"># è·å–å…ƒæ•°æ®
GET /api/v1/doc/{doc-type}/{doc-id}/metadata

# æ›´æ–°å…ƒæ•°æ®
PUT /api/v1/doc/{doc-type}/{doc-id}/metadata
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># è·å–äº§å“è¡¨çš„å­—æ®µå®šä¹‰
curl -H &#39;Authorization: Bearer TOKEN&#39; \
  &#39;https://open.nexusbook.app/api/v1/doc/product/123/metadata&#39;
</code></pre>
<h3>4. è§†å›¾</h3>
<p>è§†å›¾ç®¡ç†ç«¯ç‚¹ï¼Œæ”¯æŒ 8 ç§è§†å›¾ç±»å‹ï¼ˆTable, Gallery, Kanban, Calendar, Chart, Form, Map, Timelineï¼‰ã€‚</p>
<pre><code class="language-http"># è·å–è§†å›¾åˆ—è¡¨
GET /api/v1/doc/{doc-type}/{doc-id}/views

# åˆ›å»ºè§†å›¾
POST /api/v1/doc/{doc-type}/{doc-id}/views

# è·å–å•ä¸ªè§†å›¾
GET /api/v1/doc/{doc-type}/{doc-id}/views/{view-id}

# æ›´æ–°è§†å›¾
PUT /api/v1/doc/{doc-type}/{doc-id}/views/{view-id}

# åˆ é™¤è§†å›¾
DELETE /api/v1/doc/{doc-type}/{doc-id}/views/{view-id}

# è®¾ç½®é»˜è®¤è§†å›¾
POST /api/v1/doc/{doc-type}/{doc-id}/views/{view-id}/default
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># åˆ›å»ºçœ‹æ¿è§†å›¾
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/project/456/views&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;name&quot;: &quot;é¡¹ç›®çœ‹æ¿&quot;,
    &quot;type&quot;: &quot;kanban&quot;,
    &quot;config&quot;: {
      &quot;groupByField&quot;: &quot;status&quot;,
      &quot;displayFields&quot;: [&quot;name&quot;, &quot;assignee&quot;, &quot;dueDate&quot;]
    }
  }&#39;
</code></pre>
<h1>æ•°æ®</h1>
<p>æ•°æ®è¡Œçš„ CRUD æ“ä½œï¼Œæ”¯æŒç®€å•æŸ¥è¯¢å’Œç»“æ„åŒ–æŸ¥è¯¢ã€‚</p>
<pre><code class="language-http"># åˆ—è¡¨æŸ¥è¯¢ï¼ˆç®€å•ï¼‰
GET /api/v1/doc/{doc-type}/{doc-id}/data?page=1&amp;pageSize=20&amp;sort=name:asc

# ç»“æ„åŒ–æŸ¥è¯¢
POST /api/v1/doc/{doc-type}/{doc-id}/data/query

# åˆ›å»ºæ•°æ®è¡Œï¼ˆæ‰€æœ‰å†™æ“ä½œéœ€æºå¸¦ requestIdï¼‰
POST /api/v1/doc/{doc-type}/{doc-id}/data?requestId={request-id}

# æ‰¹é‡æ›´æ–°ï¼ˆtarget/valueï¼‰
POST /api/v1/doc/{doc-type}/{doc-id}/data/bulk?requestId={request-id}

# è·å–å•è¡Œ
GET /api/v1/doc/{doc-type}/{doc-id}/data/{row-id}

# æ›´æ–°æ•°æ®è¡Œ
PUT /api/v1/doc/{doc-type}/{doc-id}/data/{row-id}?requestId={request-id}

# åˆ é™¤æ•°æ®è¡Œ
DELETE /api/v1/doc/{doc-type}/{doc-id}/data/{row-id}?requestId={request-id}
</code></pre>
<p><strong>è¯´æ˜ï¼š</strong> æ‰€æœ‰å†™æ“ä½œç»Ÿä¸€é€šè¿‡ <code>requestId</code> è¿›å…¥å˜æ›´è¯·æ±‚å·¥ä½œæµï¼Œ<code>apply</code> å‚æ•°å·²åºŸå¼ƒã€‚</p>
<p><strong>ç¤ºä¾‹ - ç®€å•æŸ¥è¯¢ï¼š</strong></p>
<pre><code class="language-bash"># è·å–äº§å“åˆ—è¡¨ï¼ŒæŒ‰åç§°å‡åºæ’åº
curl -H &#39;Authorization: Bearer TOKEN&#39; \
  &#39;https://open.nexusbook.app/api/v1/doc/product/123/data?page=1&amp;pageSize=20&amp;sort=name:asc&#39;
</code></pre>
<p><strong>ç¤ºä¾‹ - ç»“æ„åŒ–æŸ¥è¯¢ï¼š</strong></p>
<pre><code class="language-bash"># æŸ¥è¯¢ä»·æ ¼åœ¨ 50-200 ä¹‹é—´ä¸”çŠ¶æ€ä¸º active çš„äº§å“
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/product/123/data/query&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;filters&quot;: {
      &quot;logic&quot;: &quot;and&quot;,
      &quot;conditions&quot;: [
        {&quot;field&quot;: &quot;status&quot;, &quot;operator&quot;: &quot;eq&quot;, &quot;value&quot;: &quot;active&quot;},
        {&quot;field&quot;: &quot;price&quot;, &quot;operator&quot;: &quot;range&quot;, &quot;rangeStart&quot;: 50, &quot;rangeEnd&quot;: 200}
      ]
    },
    &quot;sorts&quot;: [{&quot;field&quot;: &quot;created_at&quot;, &quot;direction&quot;: &quot;desc&quot;}],
    &quot;page&quot;: 1,
    &quot;pageSize&quot;: 20
  }&#39;
</code></pre>
<p><strong>ç¤ºä¾‹ - åˆ›å»ºæ•°æ®è¡Œï¼š</strong></p>
<pre><code class="language-bash"># ç›´æ¥åˆ›å»ºäº§å“
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/product/123/data?apply=true&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;id&quot;: &quot;row-1&quot;,
    &quot;values&quot;: [
      {&quot;fieldId&quot;: &quot;name&quot;, &quot;value&quot;: {&quot;text&quot;: &quot;æ–°äº§å“&quot;}},
      {&quot;fieldId&quot;: &quot;price&quot;, &quot;value&quot;: {&quot;number&quot;: 99.99}},
      {&quot;fieldId&quot;: &quot;status&quot;, &quot;value&quot;: {&quot;selectOption&quot;: {&quot;id&quot;: &quot;active&quot;}}}
    ]
  }&#39;
</code></pre>
<h3>6. è¯„è®ºï¼ˆç»Ÿä¸€æ¥å£ï¼‰</h3>
<p>æ”¯æŒåœ¨æ–‡æ¡£ã€å­—æ®µã€è¡Œã€å•å…ƒæ ¼ç­‰ä»»ä½•ä½ç½®è¿›è¡Œè¯„è®ºã€‚</p>
<pre><code class="language-http"># åˆ—è¡¨ï¼ˆæ”¯æŒæŒ‰ä½ç½®è¿‡æ»¤ï¼‰
GET /api/v1/doc/{doc-type}/{doc-id}/comments?scope=document|field|row|cell&amp;fieldId=&amp;rowId=

# åˆ›å»ºè¯„è®º
POST /api/v1/doc/{doc-type}/{doc-id}/comments

# è·å–å•ä¸ªè¯„è®º
GET /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}

# æ›´æ–°è¯„è®º
PUT /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}

# åˆ é™¤è¯„è®º
DELETE /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}

# ç½®é¡¶è¯„è®º
POST /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}/pin

# å–æ¶ˆç½®é¡¶
POST /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}/unpin

# æ ‡è®°ä¸ºå·²è§£å†³
POST /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}/resolve

# å–æ¶ˆå·²è§£å†³
POST /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}/unresolve

# æ·»åŠ è¡¨æƒ…ååº”
POST /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}/reactions?emoji=ğŸ‘

# åˆ é™¤è¡¨æƒ…ååº”
DELETE /api/v1/doc/{doc-type}/{doc-id}/comments/{comment-id}/reactions/{emoji}
</code></pre>
<p><strong>è¯„è®ºä½ç½®å®šä½ï¼š</strong></p>
<pre><code class="language-typescript">CommentTarget {
  scope: &quot;document&quot; | &quot;field&quot; | &quot;row&quot; | &quot;cell&quot;,
  fieldId?: string,  // scope ä¸º field æˆ– cell æ—¶
  rowId?: string     // scope ä¸º row æˆ– cell æ—¶
}
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># æ–‡æ¡£çº§è¯„è®º
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/product/123/comments&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;target&quot;: {&quot;scope&quot;: &quot;document&quot;},
    &quot;content&quot;: &quot;è¿™ä¸ªäº§å“ç›®å½•éœ€è¦æ›´æ–°&quot;
  }&#39;

# å•å…ƒæ ¼è¯„è®º
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/product/123/comments&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;target&quot;: {
      &quot;scope&quot;: &quot;cell&quot;,
      &quot;rowId&quot;: &quot;row-123&quot;,
      &quot;fieldId&quot;: &quot;price&quot;
    },
    &quot;content&quot;: &quot;è¿™ä¸ªä»·æ ¼çœ‹èµ·æ¥ä¸å¯¹ï¼Œè¯·æ ¸å®&quot;
  }&#39;
</code></pre>
<h3>8. å®æ—¶ååŒï¼ˆRealtimeï¼‰</h3>
<ul>
<li>è·å–è¿æ¥ä¿¡æ¯ï¼š<code>GET /realtime/doc/{docType}/{docId}/connect</code>ï¼ˆè¿”å› <code>wsUrl/wsHost/wsPath/port/protocols/sseUrl</code> ä¸ <code>token</code>ï¼‰</li>
<li>åœ¨çº¿ç”¨æˆ·ï¼š<code>GET /realtime/doc/{docType}/{docId}/users</code></li>
<li>é”å®š/è§£é”/é”åˆ—è¡¨ï¼š<code>POST /lock</code>ã€<code>DELETE /unlock/{lockId}</code>ã€<code>GET /locks</code></li>
<li>Yjs å¿«ç…§ï¼š<code>GET/POST /snapshot</code>ã€<code>GET /snapshots</code></li>
<li>æ›´æ–°ï¼ˆåå¤‡ï¼‰ï¼š<code>POST /apply-update</code>ã€<code>POST /awareness</code></li>
<li>äº‹ä»¶å†å²ï¼š<code>GET /events</code></li>
<li>æ–­å¼€æ‰€æœ‰ä¼šè¯ï¼š<code>POST /disconnect-all</code></li>
<li>æ¶ˆæ¯ç»“æ„ï¼š<code>GET /realtime/messages/schema</code></li>
<li>SSE æµï¼š<code>GET /realtime/doc/{docType}/{docId}/events/stream</code>ï¼ˆ<code>text/event-stream</code>ï¼‰</li>
</ul>
<p><strong>æ¡æ‰‹ç¤ºä¾‹ï¼ˆWebSocketï¼‰</strong></p>
<pre><code class="language-json">{
  &quot;kind&quot;: &quot;auth&quot;,
  &quot;seq&quot;: 1,
  &quot;payload&quot;: { &quot;token&quot;: &quot;Bearer {ACCESS_TOKEN}&quot; }
}
</code></pre>
<p>å®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶å’Œå˜æ›´è¿½è¸ªã€‚</p>
<pre><code class="language-http"># è·å–ä¿®è®¢åˆ—è¡¨
GET /api/v1/doc/{doc-type}/{doc-id}/revisions

# è·å–å•ä¸ªä¿®è®¢
GET /api/v1/doc/{doc-type}/{doc-id}/revisions/{rev-id}

# è·å–ä¿®è®¢çš„å˜æ›´æ“ä½œ
GET /api/v1/doc/{doc-type}/{doc-id}/revisions/{rev-id}/operations

# å¯¹æ¯”ä¸¤ä¸ªä¿®è®¢
GET /api/v1/doc/{doc-type}/{doc-id}/revisions/{rev-id}/diff?base={base-rev-id}

# è·å–ç‰¹å®šç›®æ ‡çš„å†å²
GET /api/v1/doc/{doc-type}/{doc-id}/revisions/history?targetKind=row&amp;rowId={row-id}

# å›æ»šåˆ°æŒ‡å®šä¿®è®¢
POST /api/v1/doc/{doc-type}/{doc-id}/revisions/{rev-id}/revert

# è·å–ä¿®è®¢å…³è”çš„è¯·æ±‚
GET /api/v1/doc/{doc-type}/{doc-id}/revisions/{rev-id}/request

# å¯¼å‡ºä¿®è®¢æ•°æ®
GET /api/v1/doc/{doc-type}/{doc-id}/revisions/{rev-id}/export?format=json
</code></pre>
<p><strong>ä¿®è®¢å˜æ›´æ“ä½œï¼š</strong></p>
<pre><code class="language-typescript">ChangeOperation {
  id: string,
  type: &quot;row-create&quot; | &quot;row-update&quot; | &quot;row-delete&quot; 
      | &quot;field-create&quot; | &quot;field-update&quot; | &quot;field-delete&quot;
      | &quot;metadata-update&quot; | &quot;settings-update&quot;,
  target: {
    kind: &quot;row&quot; | &quot;field&quot; | &quot;metadata&quot; | &quot;settings&quot;,
    rowId?: string,
    fieldId?: string
  },
  oldValue?: unknown,  // æ›´æ–°å’Œåˆ é™¤æ—¶
  newValue?: unknown,  // åˆ›å»ºå’Œæ›´æ–°æ—¶
  operator?: string,
  timestamp?: string,
  note?: string
}
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># æŸ¥çœ‹ä¿®è®¢è¯¦æƒ…
curl -H &#39;Authorization: Bearer TOKEN&#39; \
  &#39;https://open.nexusbook.app/api/v1/doc/product/123/revisions/rev-456&#39;

# å¯¹æ¯”ä¸¤ä¸ªä¿®è®¢çš„å·®å¼‚
curl -H &#39;Authorization: Bearer TOKEN&#39; \
  &#39;https://open.nexusbook.app/api/v1/doc/product/123/revisions/rev-456/diff?base=rev-455&#39;

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/product/123/revisions/rev-455/revert&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;
</code></pre>
<h3>8. å˜æ›´è¯·æ±‚</h3>
<p>ç±»ä¼¼ Git Pull Request çš„å˜æ›´ç®¡ç†æœºåˆ¶ã€‚</p>
<pre><code class="language-http"># è·å–è¯·æ±‚åˆ—è¡¨
GET /api/v1/doc/{doc-type}/{doc-id}/requests

# åˆ›å»ºè¯·æ±‚
POST /api/v1/doc/{doc-type}/{doc-id}/requests

# è·å–å•ä¸ªè¯·æ±‚
GET /api/v1/doc/{doc-type}/{doc-id}/requests/{req-id}

# åˆå¹¶è¯·æ±‚
POST /api/v1/doc/{doc-type}/{doc-id}/requests/{req-id}/merge

# å…³é—­è¯·æ±‚
POST /api/v1/doc/{doc-type}/{doc-id}/requests/{req-id}/close

# é‡æ–°æ‰“å¼€è¯·æ±‚
POST /api/v1/doc/{doc-type}/{doc-id}/requests/{req-id}/reopen

# è·å–å†²çª
GET /api/v1/doc/{doc-type}/{doc-id}/requests/{req-id}/conflicts
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># åˆ›å»ºå˜æ›´è¯·æ±‚
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/product/123/requests&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;title&quot;: &quot;æ›´æ–°äº§å“ä»·æ ¼&quot;,
    &quot;description&quot;: &quot;å¹´åº¦ä»·æ ¼è°ƒæ•´&quot;,
    &quot;changes&quot;: [
      {
        &quot;type&quot;: &quot;row-update&quot;,
        &quot;target&quot;: {&quot;kind&quot;: &quot;row&quot;, &quot;rowId&quot;: &quot;row-123&quot;},
        &quot;newValue&quot;: {
          &quot;values&quot;: [{&quot;fieldId&quot;: &quot;price&quot;, &quot;value&quot;: {&quot;number&quot;: 119.99}}]
        }
      }
    ]
  }&#39;

# åˆå¹¶è¯·æ±‚
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/product/123/requests/req-789/merge&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;
</code></pre>
<h3>9. å®¡æ‰¹</h3>
<p>å¤šå±‚çº§ã€å¤šäººå®¡æ‰¹æµç¨‹ã€‚</p>
<pre><code class="language-http"># è·å–å®¡æ‰¹é…ç½®
GET /api/v1/doc/{doc-type}/{doc-id}/approval

# å¯åŠ¨å®¡æ‰¹æµç¨‹
POST /api/v1/doc/{doc-type}/{doc-id}/approval/start

# è·å–å®¡æ‰¹å®ä¾‹
GET /api/v1/doc/{doc-type}/{doc-id}/approval/{instance-id}

# æäº¤å®¡æ‰¹å†³ç­–
POST /api/v1/doc/{doc-type}/{doc-id}/approval/{instance-id}/decision?result=approved|rejected
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># å¯åŠ¨å®¡æ‰¹æµç¨‹
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchase/p001/approval/start&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;requestId&quot;: &quot;req-789&quot;,
    &quot;flowId&quot;: &quot;purchase-approval-flow&quot;
  }&#39;

# å®¡æ‰¹é€šè¿‡
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchase/p001/approval/appr-123/decision?result=approved&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;comment&quot;: &quot;è®¢å•å·²å®¡æ ¸é€šè¿‡&quot;,
    &quot;signature&quot;: &quot;å¼ ä¸‰&quot;
  }&#39;
</code></pre>
<h3>10. è®¾ç½®</h3>
<p>æ–‡æ¡£å’Œç±»å‹çº§åˆ«çš„é…ç½®ã€‚</p>
<pre><code class="language-http"># æ–‡æ¡£çº§è®¾ç½®
GET /api/v1/doc/{doc-type}/{doc-id}/settings
PUT /api/v1/doc/{doc-type}/{doc-id}/settings

# ç±»å‹çº§è®¾ç½®
GET /api/v1/doc/{doc-type}/setting
PUT /api/v1/doc/{doc-type}/setting
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-bash"># æ›´æ–°æ–‡æ¡£è®¾ç½®
curl -X PUT &#39;https://open.nexusbook.app/api/v1/doc/product/123/settings&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;permissions&quot;: {
      &quot;allowComment&quot;: true,
      &quot;requireApproval&quot;: false
    },
    &quot;notifications&quot;: {
      &quot;emailOnChange&quot;: true
    }
  }&#39;
</code></pre>
<h3>11. è®¤è¯</h3>
<p>OAuth2 å’Œ OIDC æ ‡å‡†è®¤è¯ç«¯ç‚¹ã€‚</p>
<pre><code class="language-http"># æˆæƒç«¯ç‚¹
GET /auth/authorize

# ä»¤ç‰Œé¢å‘
POST /auth/token

# ç”¨æˆ·ä¿¡æ¯
GET /auth/userinfo

# OIDC å‘ç°
GET /auth/.well-known/openid-configuration

# å…¬é’¥é›†åˆ
GET /auth/jwks.json
</code></pre>
<p>è¯¦ç»†çš„è®¤è¯æµç¨‹è¯·æŸ¥çœ‹ <a href="../guides/authentication.md">è®¤è¯æˆæƒæŒ‡å—</a>ã€‚</p>
<h3>12. Webhooks</h3>
<p>äº‹ä»¶é©±åŠ¨çš„é€šçŸ¥æœºåˆ¶ã€‚</p>
<pre><code class="language-http"># Webhook ç®¡ç†
GET    /api/v1/webhooks
POST   /api/v1/webhooks
GET    /api/v1/webhooks/{webhook-id}
PUT    /api/v1/webhooks/{webhook-id}
DELETE /api/v1/webhooks/{webhook-id}

# Webhook æ“ä½œ
POST   /api/v1/webhooks/{webhook-id}/pause
POST   /api/v1/webhooks/{webhook-id}/resume
POST   /api/v1/webhooks/{webhook-id}/test
POST   /api/v1/webhooks/{webhook-id}/regenerate-secret

# æŠ•é€’ç®¡ç†
GET    /api/v1/webhooks/{webhook-id}/deliveries
GET    /api/v1/webhooks/{webhook-id}/deliveries/{delivery-id}
POST   /api/v1/webhooks/{webhook-id}/deliveries/{delivery-id}/redeliver

# ç»Ÿè®¡ä¿¡æ¯
GET    /api/v1/webhooks/{webhook-id}/stats
</code></pre>
<p>è¯¦ç»†çš„ Webhook ä½¿ç”¨æ–¹æ³•è¯·æŸ¥çœ‹ <a href="../guides/webhooks.md">Webhook ä½¿ç”¨æŒ‡å—</a>ã€‚</p>
<h2>æŸ¥è¯¢ä¸è¿‡æ»¤</h2>
<h3>è¿‡æ»¤æ“ä½œç¬¦</h3>
<pre><code class="language-typescript">FilterOp = 
  | &quot;eq&quot;           // ç­‰äº
  | &quot;ne&quot;           // ä¸ç­‰äº
  | &quot;in&quot;           // åŒ…å«äº
  | &quot;range&quot;        // åŒºé—´
  | &quot;contains&quot;     // åŒ…å«
  | &quot;is_empty&quot;     // ä¸ºç©º
  | &quot;is_not_empty&quot; // ä¸ä¸ºç©º
</code></pre>
<h3>è¿‡æ»¤ç»„åˆ</h3>
<pre><code class="language-typescript">FilterGroup {
  logic: &quot;and&quot; | &quot;or&quot;,
  conditions: Filter[],
  groups: FilterGroup[]  // æ”¯æŒåµŒå¥—
}
</code></pre>
<h3>æ’åº</h3>
<pre><code class="language-typescript">Sort {
  field: string,
  direction: &quot;asc&quot; | &quot;desc&quot;
}
</code></pre>
<h3>åˆ†ç»„ä¸èšåˆ</h3>
<pre><code class="language-typescript">GroupBy {
  fields: string[],
  aggregations: Aggregation[]
}

Aggregation {
  kind: &quot;count&quot; | &quot;sum&quot; | &quot;avg&quot; | &quot;min&quot; | &quot;max&quot;,
  field: string
}
</code></pre>
<h2>é”™è¯¯ç </h2>
<p>æŸ¥çœ‹ <a href="./error-codes.md">é”™è¯¯ç å‚è€ƒ</a> è·å–å®Œæ•´çš„é”™è¯¯ç åˆ—è¡¨å’Œè¯´æ˜ã€‚</p>
<h2>å­—æ®µç±»å‹</h2>
<p>æŸ¥çœ‹ <a href="./field-types.md">å­—æ®µç±»å‹å‚è€ƒ</a> è·å–æ‰€æœ‰æ”¯æŒçš„å­—æ®µç±»å‹å’Œå€¼ç±»å‹æ˜ å°„ã€‚</p>
<h2>ä¸‹ä¸€æ­¥</h2>
<ul>
<li>æŸ¥çœ‹ <a href="../guides/getting-started.md">å¿«é€Ÿå¼€å§‹æŒ‡å—</a> å¼€å§‹ä½¿ç”¨ API</li>
<li>æŸ¥çœ‹ <a href="../guides/data-operations.md">æ•°æ®æ“ä½œæŒ‡å—</a> å­¦ä¹ é«˜çº§æŸ¥è¯¢</li>
<li>æŸ¥çœ‹ <a href="../guides/best-practices.md">æœ€ä½³å®è·µ</a> äº†è§£ä½¿ç”¨å»ºè®®</li>
</ul>

                </article>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 NexusBook. åŸºäº TypeSpec å®šä¹‰å¹¶ç”Ÿæˆ OpenAPI 3.0 è§„èŒƒã€‚</p>
            </div>
        </footer>
    </div>
</body>
</html>