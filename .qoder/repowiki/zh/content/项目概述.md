# é¡¹ç›®æ¦‚è¿°

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**  
- [README.md](file://README.md)
- [main.tsp](file://api/main.tsp)
- [api/shared/common.tsp](file://api/shared/common.tsp)
- [api/shared/constants.tsp](file://api/shared/constants.tsp)
- [api/document/core/metadata.tsp](file://api/document/core/metadata.tsp)
- [api/document/core/views.tsp](file://api/document/core/views.tsp)
- [api/document/content/comments.tsp](file://api/document/content/comments.tsp)
- [api/document/workflow/approvals.tsp](file://api/document/workflow/approvals.tsp)
- [api/document/workflow/requests.tsp](file://api/document/workflow/requests.tsp)
- [api/document/workflow/revisions.tsp](file://api/document/workflow/revisions.tsp)
- [api/extensions/webhooks/models.tsp](file://api/extensions/webhooks/models.tsp)
- [api/auth/models.tsp](file://api/auth/models.tsp)
- [api/Doc.md](file://api/Doc.md)
- [docs-src/guides/architecture.md](file://docs-src/guides/architecture.md)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
4. [ç»Ÿä¸€æ–‡æ¡£æŠ½è±¡](#ç»Ÿä¸€æ–‡æ¡£æŠ½è±¡)
5. [å­—æ®µç±»å‹ä¸æ•°æ®æ¨¡å‹](#å­—æ®µç±»å‹ä¸æ•°æ®æ¨¡å‹)
6. [è§†å›¾ç³»ç»Ÿ](#è§†å›¾ç³»ç»Ÿ)
7. [åä½œåŠŸèƒ½](#åä½œåŠŸèƒ½)
8. [å·¥ä½œæµä¸å˜æ›´ç®¡ç†](#å·¥ä½œæµä¸å˜æ›´ç®¡ç†)
9. [äº‹ä»¶é©±åŠ¨çš„Webhooks](#äº‹ä»¶é©±åŠ¨çš„webhooks)
10. [è®¤è¯ä¸æƒé™æ§åˆ¶](#è®¤è¯ä¸æƒé™æ§åˆ¶)
11. [APIä½¿ç”¨ç¤ºä¾‹](#apiä½¿ç”¨ç¤ºä¾‹)
12. [ç³»ç»Ÿä¸Šä¸‹æ–‡å›¾](#ç³»ç»Ÿä¸Šä¸‹æ–‡å›¾)
13. [é›†æˆä¸æ‰©å±•](#é›†æˆä¸æ‰©å±•)

## ç®€ä»‹

NexusBook API æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¼€æºæ–‡æ¡£ç®¡ç†å’Œæ•°æ®åä½œå¹³å°ï¼Œæ—¨åœ¨ä¸ºå„ç§ä¸šåŠ¡åœºæ™¯æä¾›ç»Ÿä¸€çš„æ–‡æ¡£æŠ½è±¡å’Œçµæ´»çš„æ•°æ®ç®¡ç†èƒ½åŠ›ã€‚è¯¥å¹³å°åŸºäºTypeSpecå®šä¹‰å¹¶ç”Ÿæˆç¬¦åˆOpenAPI 3.0è§„èŒƒçš„APIï¼Œæ”¯æŒä»è®¢è´§å•ã€å‘ç¥¨åˆ°é¡¹ç›®è®¡åˆ’ç­‰å¤šç§ä¸šåŠ¡ç±»å‹çš„ç®¡ç†ã€‚

å¹³å°çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶é«˜åº¦å¯æ‰©å±•çš„æ¶æ„è®¾è®¡ï¼Œé€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼å®ç°äº†è®¤è¯æˆæƒã€æ–‡æ¡£ç®¡ç†ã€åä½œåŠŸèƒ½å’Œäº‹ä»¶é©±åŠ¨æ‰©å±•ç­‰å…³é”®ç‰¹æ€§ã€‚å¼€å‘è€…å¯ä»¥åˆ©ç”¨è¯¥APIæ„å»ºå®šåˆ¶åŒ–çš„ä¸šåŠ¡åº”ç”¨ï¼ŒåŒæ—¶äº«å—æ ‡å‡†åŒ–çš„æ¥å£æ–‡æ¡£å’Œå¼€å‘å·¥å…·é“¾å¸¦æ¥çš„ä¾¿åˆ©ã€‚

æœ¬é¡¹ç›®é‡‡ç”¨TypeSpecä½œä¸ºAPIå®šä¹‰è¯­è¨€ï¼Œä¸ä»…èƒ½å¤Ÿç”Ÿæˆç²¾ç¡®çš„OpenAPIè§„èŒƒï¼Œè¿˜æ”¯æŒä¸°å¯Œçš„å…ƒæ•°æ®æ³¨è§£å’Œç±»å‹ç³»ç»Ÿï¼Œä½¿å¾—APIè®¾è®¡æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚é€šè¿‡`make`å‘½ä»¤å¯ä»¥è½»æ¾å®Œæˆä¾èµ–å®‰è£…ã€æ–‡æ¡£ç”Ÿæˆå’Œæœ¬åœ°æœåŠ¡å¯åŠ¨ç­‰å¼€å‘ä»»åŠ¡ã€‚

**Section sources**
- [README.md](file://README.md#L1-L187)
- [main.tsp](file://api/main.tsp#L1-L134)

## é¡¹ç›®ç»“æ„

NexusBook APIçš„é¡¹ç›®ç»“æ„éµå¾ªæ¸…æ™°çš„åˆ†å±‚æ¶æ„åŸåˆ™ï¼Œä¸»è¦åˆ†ä¸ºAPIå®šä¹‰ã€æ–‡æ¡£æºæ–‡ä»¶å’Œè„šæœ¬å·¥å…·ä¸‰ä¸ªéƒ¨åˆ†ã€‚APIå®šä¹‰ç›®å½•(api/)é‡‡ç”¨TypeSpecè¯­è¨€ç¼–å†™ï¼ŒåŒ…å«äº†å…±äº«æ¨¡å—ã€è®¤è¯æ¨¡å—å’Œæ–‡æ¡£æ¨¡å—ç­‰æ ¸å¿ƒç»„ä»¶ã€‚

æ–‡æ¡£æ¨¡å—æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒï¼Œè¿›ä¸€æ­¥ç»†åˆ†ä¸ºæ ¸å¿ƒæ•°æ®æ¨¡å‹ã€å†…å®¹åä½œã€å·¥ä½œæµç®¡ç†ã€èšåˆæŸ¥è¯¢ç­‰å¤šä¸ªå­æ¨¡å—ã€‚è¿™ç§æ¨¡å—åŒ–çš„è®¾è®¡ä½¿å¾—å„ä¸ªåŠŸèƒ½åŒºåŸŸèŒè´£åˆ†æ˜ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚å…±äº«æ¨¡å—(shared/)æä¾›äº†é€šç”¨çš„æ•°æ®ç»“æ„å’Œå¸¸é‡å®šä¹‰ï¼Œç¡®ä¿äº†è·¨æ¨¡å—çš„ä¸€è‡´æ€§ã€‚

æ–‡æ¡£æºæ–‡ä»¶(docs-src/)é‡‡ç”¨Markdownæ ¼å¼ç¼–å†™ï¼ŒåŒ…å«å¼€å‘æŒ‡å—ã€å‚è€ƒæ–‡æ¡£å’Œæ ·å¼æ–‡ä»¶ã€‚é€šè¿‡è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹ï¼Œè¿™äº›æºæ–‡ä»¶å¯ä»¥ç”Ÿæˆå®Œæ•´çš„æ–‡æ¡£ç«™ç‚¹ï¼Œæ–¹ä¾¿å¼€å‘è€…æŸ¥é˜…ã€‚è„šæœ¬å·¥å…·(scripts/)åˆ™æä¾›äº†æ„å»ºã€éªŒè¯å’Œéƒ¨ç½²æ–‡æ¡£çš„è¾…åŠ©åŠŸèƒ½ã€‚

æ•´ä¸ªé¡¹ç›®é€šè¿‡tspconfig.yamlé…ç½®æ–‡ä»¶å®šä¹‰äº†TypeSpecç¼–è¯‘å™¨çš„è¡Œä¸ºï¼ŒæŒ‡å®šä½¿ç”¨@typespec/openapi3ä½œä¸ºè¾“å‡ºç›®æ ‡ï¼Œå¹¶ç”ŸæˆYAMLæ ¼å¼çš„OpenAPIæ–‡æ¡£ã€‚package.jsonä¸­å®šä¹‰äº†ç›¸å…³çš„å¼€å‘ä¾èµ–å’Œæ„å»ºè„šæœ¬ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚

```mermaid
graph TB
subgraph "APIå®šä¹‰"
A["api/"]
A1["main.tsp"]
A2["shared/"]
A3["auth/"]
A4["document/"]
A --> A1
A --> A2
A --> A3
A --> A4
end
subgraph "æ–‡æ¡£æºæ–‡ä»¶"
B["docs-src/"]
B1["guides/"]
B2["references/"]
B3["styles/"]
B --> B1
B --> B2
B --> B3
end
subgraph "æ„å»ºå·¥å…·"
C["scripts/"]
D["package.json"]
E["tspconfig.yaml"]
end
A --> |ç”Ÿæˆ| B
C --> |æ„å»º| B
D --> |å®šä¹‰ä¾èµ–| C
E --> |é…ç½®ç¼–è¯‘| A
```

**Diagram sources**
- [README.md](file://README.md#L126-L141)
- [package.json](file://package.json#L1-L16)
- [tspconfig.yaml](file://tspconfig.yaml#L1-L6)

**Section sources**
- [README.md](file://README.md#L126-L141)
- [package.json](file://package.json#L1-L16)
- [tspconfig.yaml](file://tspconfig.yaml#L1-L6)

## æ ¸å¿ƒåŠŸèƒ½

NexusBook APIæä¾›äº†ä¸€å¥—å®Œæ•´çš„æ–‡æ¡£ç®¡ç†å’Œæ•°æ®åä½œè§£å†³æ–¹æ¡ˆï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½æ¶µç›–äº†ä»åŸºç¡€æ•°æ®ç®¡ç†åˆ°é«˜çº§åä½œçš„å„ä¸ªæ–¹é¢ã€‚å¹³å°æ”¯æŒç»Ÿä¸€çš„æ–‡æ¡£æŠ½è±¡ï¼Œèƒ½å¤Ÿé€‚åº”è®¢è´§å•ã€äº§å“ã€åº“å­˜ã€é¡¹ç›®ç­‰å¤šç§ä¸šåŠ¡ç±»å‹çš„éœ€æ±‚ã€‚

åœ¨æ•°æ®ç®¡ç†æ–¹é¢ï¼Œç³»ç»Ÿæä¾›äº†25ç§ä»¥ä¸Šçš„å­—æ®µç±»å‹ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸã€é€‰æ‹©ã€é™„ä»¶ç­‰åŸºæœ¬ç±»å‹ï¼Œä»¥åŠå…¬å¼ã€æŸ¥æ‰¾ã€æ±‡æ€»ç­‰è®¡ç®—å‹å­—æ®µã€‚è¿™äº›ä¸°å¯Œçš„å­—æ®µç±»å‹ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿçµæ´»åœ°å®šä¹‰å„ç§å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ã€‚

è§†å›¾ç³»ç»Ÿæ”¯æŒè¡¨æ ¼ã€çœ‹æ¿ã€æ—¥å†ã€å›¾è¡¨ç­‰8ç§è§†å›¾ç±»å‹ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©æœ€é€‚åˆçš„æ•°æ®å±•ç¤ºæ–¹å¼ã€‚æ¯ç§è§†å›¾éƒ½å¯ä»¥è¿›è¡Œä¸ªæ€§åŒ–çš„é…ç½®ï¼ŒåŒ…æ‹¬å­—æ®µæ˜¾ç¤ºã€è¿‡æ»¤æ¡ä»¶ã€æ’åºè§„åˆ™å’Œåˆ†ç»„è®¾ç½®ï¼Œæå¤§åœ°æå‡äº†æ•°æ®çš„å¯è¯»æ€§å’Œå¯ç”¨æ€§ã€‚

åä½œåŠŸèƒ½æ˜¯å¹³å°çš„ä¸€å¤§äº®ç‚¹ï¼Œæ”¯æŒè¯„è®ºã€ä¿®è®¢ã€å®¡æ‰¹å’Œå˜æ›´è¯·æ±‚ç­‰å®Œæ•´çš„åä½œæµç¨‹ã€‚ç”¨æˆ·å¯ä»¥åœ¨æ–‡æ¡£çš„ä»»ä½•ä½ç½®æ·»åŠ è¯„è®ºï¼Œå‘èµ·å˜æ›´è¯·æ±‚ï¼Œå¹¶é€šè¿‡å®¡æ‰¹æµç¨‹ç¡®ä¿æ•°æ®å˜æ›´çš„åˆè§„æ€§ã€‚æ‰€æœ‰æ“ä½œéƒ½ä¼šè¢«è®°å½•åœ¨ä¿®è®¢å†å²ä¸­ï¼Œæ”¯æŒç‰ˆæœ¬å¯¹æ¯”å’Œå›æ»šã€‚

**Section sources**
- [README.md](file://README.md#L19-L29)
- [api/Doc.md](file://api/Doc.md#L1-L832)

## ç»Ÿä¸€æ–‡æ¡£æŠ½è±¡

NexusBook APIé‡‡ç”¨ç»Ÿä¸€çš„æ–‡æ¡£æŠ½è±¡æ¨¡å‹æ¥ç®¡ç†å„ç§ç±»å‹çš„ä¸šåŠ¡æ•°æ®ã€‚è¿™ä¸ªæ¨¡å‹å°†æ–‡æ¡£è§†ä¸ºä¸€ä¸ªåŒ…å«å¤šä¸ªå±‚æ¬¡çš„å¤åˆç»“æ„ï¼Œæ¯ä¸ªå±‚æ¬¡è´Ÿè´£ä¸åŒçš„åŠŸèƒ½ï¼Œå…±åŒæ„æˆäº†å®Œæ•´çš„æ–‡æ¡£ç®¡ç†ä½“ç³»ã€‚

æ–‡æ¡£çš„æ ¸å¿ƒå±‚æ¬¡åŒ…æ‹¬å±æ€§(Properties)ã€å…ƒæ•°æ®(Metadata)ã€æ•°æ®(Data)ã€è§†å›¾(Views)ã€è¯„è®º(Comments)ã€ä¿®è®¢(Revisions)å’Œè®¾ç½®(Settings)ã€‚å±æ€§å±‚å­˜å‚¨æ–‡æ¡£æœ¬èº«çš„å…ƒä¿¡æ¯ï¼Œå¦‚è®¢è´§å•çš„è®¢å•æ—¶é—´ã€é—¨åº—ã€é‡‘é¢ç­‰ï¼›å…ƒæ•°æ®å±‚å®šä¹‰æ–‡æ¡£çš„å­—æ®µç»“æ„å’ŒéªŒè¯è§„åˆ™ï¼›æ•°æ®å±‚å­˜å‚¨å®é™…çš„æ•°æ®è¡Œå†…å®¹ã€‚

è¿™ç§åˆ†å±‚æ¶æ„ä½¿å¾—æ–‡æ¡£æ—¢å…·æœ‰çµæ´»æ€§åˆä¿æŒä¸€è‡´æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨è®¢è´§å•åœºæ™¯ä¸­ï¼Œå±æ€§å±‚å¯ä»¥å­˜å‚¨è®¢å•çš„æ€»ä½“ä¿¡æ¯ï¼Œå…ƒæ•°æ®å±‚å®šä¹‰äº§å“åç§°ã€æ•°é‡ã€å•ä»·ç­‰å­—æ®µï¼Œæ•°æ®å±‚å­˜å‚¨å…·ä½“çš„è®¢å•é¡¹ï¼Œè€Œè§†å›¾å±‚åˆ™æä¾›ä¸åŒçš„æ•°æ®å±•ç¤ºæ–¹å¼ã€‚

é€šè¿‡èšåˆæŸ¥è¯¢æœºåˆ¶ï¼Œç³»ç»Ÿæ”¯æŒä¸€æ¬¡æ€§è·å–æ–‡æ¡£çš„å¤šä¸ªå±‚æ¬¡æ•°æ®ï¼Œé¿å…äº†å¤šæ¬¡APIè°ƒç”¨å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡includeå‚æ•°æŒ‡å®šéœ€è¦è·å–çš„æ•°æ®å±‚æ¬¡ï¼Œå¦‚`include=metadata,views,data`ï¼Œä»è€Œé«˜æ•ˆåœ°åˆå§‹åŒ–é¡µé¢æˆ–ç”ŸæˆæŠ¥è¡¨ã€‚

```mermaid
graph TB
Doc["ğŸ“„ Document"]
subgraph "æ ¸å¿ƒæ•°æ®å±‚"
Props["ğŸ·ï¸ Properties<br/>æ–‡æ¡£å±æ€§"]
Meta["ğŸ“‹ Metadata<br/>å­—æ®µå®šä¹‰"]
Views["ğŸ‘ï¸ Views<br/>è§†å›¾é…ç½®"]
Data["ğŸ“Š Data<br/>æ•°æ®è¡Œ"]
Settings["âš™ï¸ Settings<br/>é…ç½®"]
end
subgraph "åä½œå±‚"
Comments["ğŸ’¬ Comments<br/>è¯„è®ºç³»ç»Ÿ"]
end
subgraph "å·¥ä½œæµå±‚"
Requests["ğŸ“ Requests<br/>å˜æ›´è¯·æ±‚"]
Revisions["ğŸ“œ Revisions<br/>ä¿®è®¢å†å²"]
Approvals["âœ… Approvals<br/>å®¡æ‰¹æµç¨‹"]
end
Doc --> Props
Doc --> Meta
Doc --> Views
Doc --> Data
Doc --> Settings
Doc --> Comments
Doc --> Requests
Doc --> Revisions
Doc --> Approvals
```

**Diagram sources**
- [api/Doc.md](file://api/Doc.md#L7-L32)
- [docs-src/guides/architecture.md](file://docs-src/guides/architecture.md#L7-L67)

**Section sources**
- [api/Doc.md](file://api/Doc.md#L1-L832)
- [docs-src/guides/architecture.md](file://docs-src/guides/architecture.md#L5-L67)

## å­—æ®µç±»å‹ä¸æ•°æ®æ¨¡å‹

NexusBook APIæä¾›äº†ä¸°å¯Œçš„å­—æ®µç±»å‹æ”¯æŒï¼Œæ¶µç›–äº†25ç§ä»¥ä¸Šçš„æ•°æ®ç±»å‹ï¼Œæ»¡è¶³å„ç§å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚ã€‚è¿™äº›å­—æ®µç±»å‹åˆ†ä¸ºåŸºæœ¬ç±»å‹å’Œè®¡ç®—ç±»å‹ä¸¤å¤§ç±»ï¼Œæ¯ç§ç±»å‹éƒ½æœ‰æ˜ç¡®çš„è¯­ä¹‰å’Œä½¿ç”¨åœºæ™¯ã€‚

åŸºæœ¬å­—æ®µç±»å‹åŒ…æ‹¬æ–‡æœ¬(text/long_text)ã€æ•°å­—(number/currency/percent)ã€å¸ƒå°”å€¼(boolean)ã€æ—¥æœŸ(date/datetime)ã€é€‰æ‹©(single_select/multi_select)ã€é™„ä»¶(attachment)ã€ç”¨æˆ·(user/collaborator)å’Œå…³ç³»(relation)ç­‰ã€‚è¿™äº›ç±»å‹æ„æˆäº†æ•°æ®æ¨¡å‹çš„åŸºç¡€ï¼Œèƒ½å¤Ÿè¡¨è¾¾ç»å¤§å¤šæ•°çš„ä¸šåŠ¡æ•°æ®ã€‚

è®¡ç®—å­—æ®µç±»å‹æ˜¯å¹³å°çš„ç‰¹è‰²åŠŸèƒ½ï¼ŒåŒ…æ‹¬æŸ¥æ‰¾(lookup)ã€æ±‡æ€»(rollup)å’Œå…¬å¼(formula)ä¸‰ç§ã€‚æŸ¥æ‰¾å­—æ®µå¯ä»¥ä»å…³è”æ–‡æ¡£ä¸­æå–ç‰¹å®šå­—æ®µçš„å€¼ï¼›æ±‡æ€»å­—æ®µå¯ä»¥å¯¹å…³è”æ•°æ®è¿›è¡Œç»Ÿè®¡è®¡ç®—ï¼Œå¦‚æ±‚å’Œã€å¹³å‡å€¼ç­‰ï¼›å…¬å¼å­—æ®µæ”¯æŒåŸºäºå…¶ä»–å­—æ®µçš„è¡¨è¾¾å¼è®¡ç®—ï¼Œæä¾›äº†å¼ºå¤§çš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚

æ•°æ®æ¨¡å‹é‡‡ç”¨çµæ´»çš„é”®å€¼å¯¹ç»“æ„ï¼Œæ”¯æŒåŠ¨æ€æ‰©å±•ã€‚æ¯ä¸ªå­—æ®µéƒ½æœ‰è¯¦ç»†çš„é…ç½®é€‰é¡¹ï¼ŒåŒ…æ‹¬æ˜¯å¦å¿…å¡«ã€æ˜¯å¦å”¯ä¸€ã€é»˜è®¤å€¼ã€éªŒè¯è§„åˆ™ç­‰ã€‚å¯¹äºé€‰æ‹©ç±»å­—æ®µï¼Œè¿˜å¯ä»¥å®šä¹‰é€‰é¡¹åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ ‡ç­¾ã€é¢œè‰²å’Œç¦ç”¨çŠ¶æ€ç­‰å±æ€§ã€‚

```mermaid
graph LR
subgraph "å­—æ®µç±»å‹"
F1["text<br/>long_text"]
F2["number<br/>currency<br/>percent"]
F3["boolean"]
F4["date<br/>datetime"]
F5["duration"]
F6["single_select"]
F7["multi_select"]
F8["rating"]
F9["attachment"]
F10["user"]
F11["collaborator"]
F12["relation"]
F13["lookup<br/>rollup<br/>formula"]
end
subgraph "å€¼ç±»å‹"
V1["string"]
V2["float64"]
V3["boolean"]
V4["string<br/><small>ISO 8601</small>"]
V5["int64<br/><small>æ¯«ç§’</small>"]
V6["SelectOption"]
V7["SelectOption[]"]
V8["int32<br/><small>1-5</small>"]
V9["Attachment[]"]
V10["UserRef"]
V11["CollaboratorRef"]
V12["RelationRef[]"]
V13["<small>åŠ¨æ€ç±»å‹</small>"]
end
F1 --> V1
F2 --> V2
F3 --> V3
F4 --> V4
F5 --> V5
F6 --> V6
F7 --> V7
F8 --> V8
F9 --> V9
F10 --> V10
F11 --> V11
F12 --> V12
F13 --> V13
```

**Diagram sources**
- [api/shared/common.tsp](file://api/shared/common.tsp#L544-L561)
- [api/shared/constants.tsp](file://api/shared/constants.tsp#L145-L259)
- [docs-src/guides/architecture.md](file://docs-src/guides/architecture.md#L316-L362)

**Section sources**
- [api/shared/common.tsp](file://api/shared/common.tsp#L544-L576)
- [api/shared/constants.tsp](file://api/shared/constants.tsp#L145-L259)
- [api/document/core/metadata.tsp](file://api/document/core/metadata.tsp#L29-L52)

## è§†å›¾ç³»ç»Ÿ

NexusBook APIçš„è§†å›¾ç³»ç»Ÿæä¾›äº†8ç§ä¸åŒçš„æ•°æ®å±•ç¤ºæ–¹å¼ï¼Œæ»¡è¶³å¤šæ ·åŒ–çš„ä¸šåŠ¡éœ€æ±‚ã€‚ç³»ç»Ÿæ”¯æŒè¡¨æ ¼(grid)ã€ç›¸å†Œ(gallery)ã€çœ‹æ¿(kanban)ã€æ—¥å†(calendar)ã€å›¾è¡¨(chart)ã€è¡¨å•(form)ã€åœ°å›¾(map)å’Œæ—¶é—´çº¿(timeline)ç­‰è§†å›¾ç±»å‹ï¼Œæ¯ç§ç±»å‹éƒ½æœ‰å…¶ç‰¹å®šçš„åº”ç”¨åœºæ™¯ã€‚

è¡¨æ ¼è§†å›¾é€‚åˆå¤„ç†ç»“æ„åŒ–æ•°æ®ï¼Œæä¾›ç±»ä¼¼ç”µå­è¡¨æ ¼çš„æ“ä½œä½“éªŒï¼›ç›¸å†Œè§†å›¾ä»¥å¡ç‰‡å½¢å¼å±•ç¤ºæ•°æ®ï¼Œç‰¹åˆ«é€‚åˆåŒ…å«å›¾ç‰‡çš„å†…å®¹ï¼›çœ‹æ¿è§†å›¾æŒ‰ç…§çŠ¶æ€æˆ–åˆ†ç±»ç»„ç»‡æ•°æ®ï¼Œé€‚ç”¨äºé¡¹ç›®ç®¡ç†å’Œå·¥ä½œæµè·Ÿè¸ªï¼›æ—¥å†è§†å›¾å°†æ•°æ®æŒ‰æ—¶é—´è½´æ’åˆ—ï¼Œä¾¿äºæŸ¥çœ‹æ—¶é—´ç›¸å…³çš„å®‰æ’ã€‚

è§†å›¾é…ç½®éå¸¸çµæ´»ï¼Œæ”¯æŒå­—æ®µæ˜¾ç¤ºæ§åˆ¶ã€è¿‡æ»¤æ¡ä»¶ã€æ’åºè§„åˆ™å’Œåˆ†ç»„è®¾ç½®ã€‚ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰å“ªäº›å­—æ®µåœ¨è§†å›¾ä¸­æ˜¾ç¤ºï¼Œè®¾ç½®åˆ—å®½å’Œæ˜¾ç¤ºé¡ºåºï¼Œåº”ç”¨å¤æ‚çš„è¿‡æ»¤é€»è¾‘ï¼Œå¹¶æŒ‰ç…§ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µè¿›è¡Œæ’åºã€‚åˆ†ç»„åŠŸèƒ½å¯ä»¥å°†æ•°æ®æŒ‰ç‰¹å®šå­—æ®µåˆ†ç»„æ˜¾ç¤ºï¼Œé…åˆèšåˆå‡½æ•°æä¾›ç»Ÿè®¡ä¿¡æ¯ã€‚

APIæä¾›äº†å®Œæ•´çš„è§†å›¾ç®¡ç†æ¥å£ï¼Œæ”¯æŒåˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤è§†å›¾æ“ä½œã€‚æ¯ä¸ªè§†å›¾éƒ½æœ‰ç‹¬ç«‹çš„é…ç½®ï¼Œå¯ä»¥ä¿å­˜ä¸ºæ¨¡æ¿ä¾›å›¢é˜Ÿå…±äº«ä½¿ç”¨ã€‚ç³»ç»Ÿè¿˜æ”¯æŒè®¾ç½®é»˜è®¤è§†å›¾ï¼Œç¡®ä¿ç”¨æˆ·æ¯æ¬¡æ‰“å¼€æ–‡æ¡£æ—¶éƒ½èƒ½çœ‹åˆ°æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚

```mermaid
graph TD
View["è§†å›¾é…ç½®"]
subgraph "åŸºç¡€é…ç½®"
Name["åç§°"]
Type["ç±»å‹"]
Fields["æ˜¾ç¤ºå­—æ®µ"]
end
subgraph "æ•°æ®å¤„ç†"
Filters["è¿‡æ»¤æ¡ä»¶"]
Sorts["æ’åºè§„åˆ™"]
Group["åˆ†ç»„è®¾ç½®"]
end
subgraph "æ˜¾ç¤ºè®¾ç½®"
Column["åˆ—é…ç½®"]
Width["åˆ—å®½"]
Order["åˆ—é¡ºåº"]
Pinned["å›ºå®šåˆ—"]
Hidden["éšè—åˆ—"]
end
View --> Name
View --> Type
View --> Fields
View --> Filters
View --> Sorts
View --> Group
View --> Column
Column --> Width
Column --> Order
Column --> Pinned
Column --> Hidden
```

**Diagram sources**
- [api/shared/constants.tsp](file://api/shared/constants.tsp#L91-L139)
- [api/document/core/views.tsp](file://api/document/core/views.tsp#L28-L84)

**Section sources**
- [api/document/core/views.tsp](file://api/document/core/views.tsp#L1-L171)
- [api/shared/constants.tsp](file://api/shared/constants.tsp#L91-L139)

## åä½œåŠŸèƒ½

NexusBook APIæä¾›äº†å…¨é¢çš„åä½œåŠŸèƒ½ï¼Œæ”¯æŒå›¢é˜Ÿæˆå‘˜åœ¨æ–‡æ¡£ä¸Šè¿›è¡Œé«˜æ•ˆçš„ååŒå·¥ä½œã€‚ç³»ç»Ÿå®ç°äº†ç²¾ç¡®å®šä½çš„è¯„è®ºç³»ç»Ÿï¼Œå…è®¸ç”¨æˆ·åœ¨æ–‡æ¡£ã€å­—æ®µã€è¡Œæˆ–å•å…ƒæ ¼çº§åˆ«æ·»åŠ è¯„è®ºï¼Œç¡®ä¿è®¨è®ºèƒ½å¤Ÿèšç„¦åœ¨å…·ä½“çš„å†…å®¹ä¸Šã€‚

è¯„è®ºç³»ç»Ÿæ”¯æŒçº¿ç¨‹åŒ–è®¨è®ºï¼Œé€šè¿‡parentIdå½¢æˆå›å¤é“¾ï¼Œä¿æŒå¯¹è¯çš„é€»è¾‘ç»“æ„ã€‚ç”¨æˆ·å¯ä»¥åœ¨è¯„è®ºä¸­@æåŠç›¸å…³äººå‘˜ï¼Œç³»ç»Ÿä¼šå‘é€é€šçŸ¥æé†’è¢«æåŠè€…å‚ä¸è®¨è®ºã€‚è¡¨æƒ…ååº”åŠŸèƒ½å…è®¸ç”¨æˆ·å¿«é€Ÿè¡¨è¾¾å¯¹è¯„è®ºçš„æ€åº¦ï¼Œå¦‚ç‚¹èµã€æƒŠè®¶ç­‰ï¼Œæé«˜äº†æ²Ÿé€šæ•ˆç‡ã€‚

æ‰€æœ‰è¯„è®ºéƒ½æœ‰è§£å†³çŠ¶æ€æ ‡è®°ï¼Œå¸®åŠ©å›¢é˜Ÿè·Ÿè¸ªé—®é¢˜çš„å¤„ç†è¿›åº¦ã€‚å·²è§£å†³çš„è¯„è®ºå¯ä»¥è¢«æ ‡è®°ä¸ºå·²è§£å†³ï¼Œä½†ä»ä¿ç•™åœ¨å†å²è®°å½•ä¸­ä¾›åç»­å‚è€ƒã€‚ç³»ç»Ÿè¿˜æ”¯æŒè¯„è®ºçš„ç½®é¡¶åŠŸèƒ½ï¼Œå°†é‡è¦çš„è®¨è®ºå›ºå®šåœ¨é¡¶éƒ¨ï¼Œç¡®ä¿å…³é”®ä¿¡æ¯ä¸ä¼šè¢«æ·¹æ²¡ã€‚

é™¤äº†è¯„è®ºï¼Œç³»ç»Ÿè¿˜æä¾›äº†å®æ—¶åä½œèƒ½åŠ›ï¼Œå¤šä¸ªç”¨æˆ·å¯ä»¥åŒæ—¶ç¼–è¾‘åŒä¸€ä¸ªæ–‡æ¡£ï¼Œå˜æ›´ä¼šå®æ—¶åŒæ­¥ç»™æ‰€æœ‰å‚ä¸è€…ã€‚å†²çªè§£å†³æœºåˆ¶ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé¿å…å› å¹¶å‘ç¼–è¾‘å¯¼è‡´çš„æ•°æ®ä¸¢å¤±ã€‚

**Section sources**
- [api/Doc.md](file://api/Doc.md#L300-L403)
- [api/document/content/comments.tsp](file://api/document/content/comments.tsp)

## å·¥ä½œæµä¸å˜æ›´ç®¡ç†

NexusBook APIçš„å·¥ä½œæµç³»ç»Ÿå®ç°äº†å®Œæ•´çš„å˜æ›´ç®¡ç†æµç¨‹ï¼Œå€Ÿé‰´äº†Gitçš„Pull Requestæ¨¡å¼ï¼Œç¡®ä¿æ•°æ®å˜æ›´çš„å¯è¿½æº¯æ€§å’Œåˆè§„æ€§ã€‚ç³»ç»Ÿé€šè¿‡è¯·æ±‚(Request)ã€å®¡æ‰¹(Approval)å’Œä¿®è®¢(Revision)ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„å»ºäº†ä¸¥è°¨çš„å˜æ›´æ§åˆ¶æœºåˆ¶ã€‚

å½“ç”¨æˆ·éœ€è¦ä¿®æ”¹æ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªå˜æ›´è¯·æ±‚ï¼Œè€Œä¸æ˜¯ç›´æ¥åº”ç”¨å˜æ›´ã€‚è¿™ä¸ªè¯·æ±‚å¯ä»¥åŒ…å«å¤šä¸ªæ“ä½œï¼Œå…è®¸å¤šä¸ªå›¢é˜Ÿæˆå‘˜åœ¨åŒä¸€ä¸ªè¯·æ±‚ä¸­åä½œç¼–è¾‘ã€‚è¯·æ±‚å¯ä»¥è¢«æäº¤ç»™æŒ‡å®šçš„å®¡æ‰¹äººï¼Œè§¦å‘å¤šå±‚çº§çš„å®¡æ‰¹æµç¨‹ã€‚

å®¡æ‰¹æµç¨‹æ”¯æŒå¤šç§å†³ç­–ç±»å‹ï¼ŒåŒ…æ‹¬æ‰¹å‡†ã€æ‹’ç»å’Œè¯·æ±‚ä¿®æ”¹ã€‚æ¯ä¸ªå®¡æ‰¹å†³ç­–éƒ½ä¼šè¢«è®°å½•åœ¨æ¡ˆï¼Œå½¢æˆå®Œæ•´çš„å®¡è®¡è½¨è¿¹ã€‚åªæœ‰ç»è¿‡æ‰¹å‡†çš„è¯·æ±‚æ‰ä¼šè¢«åˆå¹¶åˆ°ä¸»æ–‡æ¡£ä¸­ï¼Œç¡®ä¿å…³é”®æ•°æ®çš„å˜æ›´éƒ½ç»è¿‡é€‚å½“çš„å®¡æŸ¥ã€‚

æ‰€æœ‰çš„å˜æ›´æ“ä½œéƒ½ä¼šç”Ÿæˆä¿®è®¢è®°å½•ï¼ŒåŒ…å«æ“ä½œç±»å‹ã€ç›®æ ‡ä½ç½®ã€æ–°æ—§å€¼ã€æ“ä½œäººå’Œæ—¶é—´æˆ³ç­‰è¯¦ç»†ä¿¡æ¯ã€‚ä¿®è®¢å†å²æ”¯æŒç‰ˆæœ¬å¯¹æ¯”åŠŸèƒ½ï¼Œå¯ä»¥ç›´è§‚åœ°æŸ¥çœ‹ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ã€‚ç³»ç»Ÿè¿˜æ”¯æŒå›æ»šåˆ°ä»»æ„å†å²ç‰ˆæœ¬ï¼Œä¸ºæ•°æ®æ¢å¤æä¾›äº†å¯é çš„ä¿éšœã€‚

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant API as API
participant Request as å˜æ›´è¯·æ±‚
participant Approval as å®¡æ‰¹æµç¨‹
participant Revision as ä¿®è®¢å†å²
participant Data as æ•°æ®å­˜å‚¨
User->>API : POST /data
API->>Request : åˆ›å»ºå˜æ›´è¯·æ±‚
Request-->>User : è¿”å›è¯·æ±‚ID
User->>Request : æ·»åŠ /ä¿®æ”¹å˜æ›´
Note over Request : å¤šä¸ªç”¨æˆ·å¯ä»¥<br/>åœ¨åŒä¸€è¯·æ±‚ä¸­<br/>åä½œç¼–è¾‘
User->>API : POST /requests/{id}/merge
API->>Approval : è§¦å‘å®¡æ‰¹æµç¨‹
Approval->>Approval : å¤šå±‚çº§å®¡æ‰¹
alt å®¡æ‰¹é€šè¿‡
Approval->>Request : æ‰¹å‡†åˆå¹¶
Request->>Data : åº”ç”¨å˜æ›´
Request->>Revision : ç”Ÿæˆä¿®è®¢
Revision-->>User : å®Œæˆ
else å®¡æ‰¹æ‹’ç»
Approval->>Request : æ‹’ç»
Request-->>User : éœ€è¦ä¿®æ”¹
end
```

**Diagram sources**
- [docs-src/guides/architecture.md](file://docs-src/guides/architecture.md#L257-L303)
- [api/document/workflow/requests.tsp](file://api/document/workflow/requests.tsp)
- [api/document/workflow/approvals.tsp](file://api/document/workflow/approvals.tsp)
- [api/document/workflow/revisions.tsp](file://api/document/workflow/revisions.tsp)

**Section sources**
- [api/Doc.md](file://api/Doc.md#L405-L498)
- [docs-src/guides/architecture.md](file://docs-src/guides/architecture.md#L257-L312)

## äº‹ä»¶é©±åŠ¨çš„Webhooks

NexusBook APIæä¾›äº†äº‹ä»¶é©±åŠ¨çš„Webhooksæ‰©å±•æœºåˆ¶ï¼Œæ”¯æŒ20å¤šç§äº‹ä»¶ç±»å‹çš„è‡ªåŠ¨é€šçŸ¥ã€‚å½“æ–‡æ¡£å‘ç”Ÿé‡è¦å˜æ›´æ—¶ï¼Œç³»ç»Ÿä¼šå‘é¢„å…ˆæ³¨å†Œçš„URLæ¨é€äº‹ä»¶é€šçŸ¥ï¼Œå®ç°ä¸å…¶ä»–ç³»ç»Ÿçš„å®æ—¶é›†æˆã€‚

æ”¯æŒçš„äº‹ä»¶ç±»å‹æ¶µç›–äº†æ–‡æ¡£ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬å˜æ›´è¯·æ±‚(create_request, merge_request)ã€å®¡æ‰¹(approval_created, approval_approved)ã€è¯„è®º(comment_created, comment_resolved)ã€å…ƒæ•°æ®å˜æ›´(metadata_updated)å’Œè§†å›¾å˜æ›´(view_created)ç­‰ã€‚è¿™ç§ç»†ç²’åº¦çš„äº‹ä»¶åˆ’åˆ†ä½¿å¾—å¤–éƒ¨ç³»ç»Ÿå¯ä»¥ç²¾ç¡®åœ°å“åº”ç‰¹å®šçš„ä¸šåŠ¡åŠ¨ä½œã€‚

Webhooksé…ç½®æ”¯æŒå®‰å…¨éªŒè¯ï¼ŒåŒ…æ‹¬ç­¾åéªŒè¯å’Œé‡è¯•æœºåˆ¶ã€‚ç³»ç»Ÿä¼šä¸ºæ¯ä¸ªäº‹ä»¶ç”Ÿæˆç­¾åï¼Œæ¥æ”¶æ–¹å¯ä»¥éªŒè¯è¯·æ±‚çš„æ¥æºå¯é æ€§ã€‚å¯¹äºå¤±è´¥çš„æ¨é€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œé‡è¯•ï¼Œç¡®ä¿é‡è¦é€šçŸ¥ä¸ä¼šä¸¢å¤±ã€‚æŠ•é€’å†å²å’Œç»Ÿè®¡åŠŸèƒ½å¸®åŠ©å¼€å‘è€…ç›‘æ§Webhooksçš„è¿è¡ŒçŠ¶æ€ã€‚

é€šè¿‡Webhooksï¼Œä¼ä¸šå¯ä»¥æ„å»ºä¸°å¯Œçš„é›†æˆåœºæ™¯ï¼Œå¦‚å°†å®¡æ‰¹é€šçŸ¥å‘é€åˆ°ä¼ä¸šå¾®ä¿¡ã€åœ¨æ•°æ®å˜æ›´æ—¶æ›´æ–°ERPç³»ç»Ÿã€æˆ–å°†è¯„è®ºåŒæ­¥åˆ°å®¢æˆ·æœåŠ¡ç³»ç»Ÿã€‚è¿™ç§æ¾è€¦åˆçš„é›†æˆæ–¹å¼æé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚

**Section sources**
- [README.md](file://README.md#L27-L28)
- [api/extensions/webhooks/models.tsp](file://api/extensions/webhooks/models.tsp)
- [api/extensions/webhooks/index.tsp](file://api/extensions/webhooks/index.tsp)

## è®¤è¯ä¸æƒé™æ§åˆ¶

NexusBook APIå®ç°äº†æ ‡å‡†çš„OAuth2å’ŒOIDCå…¼å®¹è®¤è¯ä½“ç³»ï¼Œæ”¯æŒå¤šç§è®¤è¯æµç¨‹å’Œç²¾ç»†çš„æƒé™æ§åˆ¶ã€‚ç³»ç»Ÿæ”¯æŒæˆæƒç æµç¨‹ã€å®¢æˆ·ç«¯å‡­è¯æµç¨‹å’Œéšå¼æµç¨‹ï¼Œæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯çš„å®‰å…¨éœ€æ±‚ã€‚

è®¤è¯æœåŠ¡æä¾›äº†å®Œæ•´çš„JWTä»¤ç‰Œç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä»¤ç‰Œçš„ç­¾å‘ã€éªŒè¯å’Œåˆ·æ–°ã€‚æ ‡å‡†çš„OIDCå‘ç°ç«¯ç‚¹(.well-known/openid-configuration)ä½¿å¾—ç³»ç»Ÿå¯ä»¥è½»æ¾é›†æˆåˆ°ç°æœ‰çš„èº«ä»½æä¾›å•†ç”Ÿæ€ä¸­ã€‚ç”¨æˆ·ä¿¡æ¯ç«¯ç‚¹æ”¯æŒè·å–ç»è¿‡éªŒè¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚

æƒé™æ§åˆ¶åŸºäºScopeæœºåˆ¶å®ç°ï¼Œæ¯ä¸ªAPIç«¯ç‚¹éƒ½æœ‰æ˜ç¡®çš„æƒé™è¦æ±‚ã€‚å¸¸è§çš„æƒé™èŒƒå›´åŒ…æ‹¬doc:readï¼ˆæ–‡æ¡£è¯»å–ï¼‰ã€doc:writeï¼ˆæ–‡æ¡£å†™å…¥ï¼‰ã€data:readï¼ˆæ•°æ®è¯»å–ï¼‰ã€data:writeï¼ˆæ•°æ®å†™å…¥ï¼‰ç­‰ã€‚å®¢æˆ·ç«¯åœ¨è·å–è®¿é—®ä»¤ç‰Œæ—¶éœ€è¦å£°æ˜æ‰€éœ€çš„æƒé™èŒƒå›´ã€‚

ç³»ç»Ÿè¿˜æ”¯æŒAPIå¯†é’¥ç®¡ç†ï¼Œä¸ºæœåŠ¡é—´è°ƒç”¨æä¾›äº†ä¸€ç§ç®€å•çš„è®¤è¯æ–¹å¼ã€‚APIå¯†é’¥å¯ä»¥é…ç½®æƒé™èŒƒå›´ã€é€Ÿç‡é™åˆ¶å’ŒIPç™½åå•ï¼Œç¡®ä¿æ¥å£è°ƒç”¨çš„å®‰å…¨æ€§å’Œå¯æ§æ€§ã€‚æ‰€æœ‰è®¤è¯ç›¸å…³çš„æ“ä½œéƒ½æœ‰è¯¦ç»†çš„æ—¥å¿—è®°å½•ï¼Œä¾¿äºå®¡è®¡å’Œæ•…éšœæ’æŸ¥ã€‚

**Section sources**
- [README.md](file://README.md#L28-L29)
- [main.tsp](file://api/main.tsp#L34-L43)
- [api/auth/models.tsp](file://api/auth/models.tsp)
- [api/auth/index.tsp](file://api/auth/index.tsp)

## APIä½¿ç”¨ç¤ºä¾‹

NexusBook APIæä¾›äº†æ¸…æ™°çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå…¸å‹çš„APIè°ƒç”¨åœºæ™¯ï¼š

è·å–è®¿é—®ä»¤ç‰Œï¼š
```bash
curl -X POST https://auth.nexusbook.com/token \
  -d 'grant_type=client_credentials' \
  -d 'client_id=YOUR_CLIENT_ID' \
  -d 'client_secret=YOUR_CLIENT_SECRET' \
  -d 'scope=doc:read data:read'
```

è·å–æ–‡æ¡£æ•°æ®ï¼š
```bash
curl -H 'Authorization: Bearer YOUR_ACCESS_TOKEN' \
  'https://open.nexusbook.com/api/v1/doc/product/123?include=metadata,views,data'
```

åˆ›å»ºæ•°æ®è¡Œï¼š
```bash
curl -X POST 'https://open.nexusbook.com/api/v1/doc/product/123/data?apply=true' \
  -H 'Authorization: Bearer TOKEN' \
  -H 'Content-Type: application/json' \
  -d '{
    "id": "row-1",
    "values": [
      {"fieldId": "name", "value": {"text": "æ–°äº§å“"}},
      {"fieldId": "price", "value": {"number": 99.99}}
    ]
  }'
```

è¿™äº›ç¤ºä¾‹å±•ç¤ºäº†APIçš„åŸºæœ¬ä½¿ç”¨æ¨¡å¼ï¼šé¦–å…ˆé€šè¿‡è®¤è¯æœåŠ¡è·å–è®¿é—®ä»¤ç‰Œï¼Œç„¶ååœ¨åç»­è¯·æ±‚ä¸­ä½¿ç”¨Bearer Tokenè¿›è¡Œèº«ä»½éªŒè¯ã€‚èšåˆæŸ¥è¯¢åŠŸèƒ½å…è®¸ä¸€æ¬¡æ€§è·å–æ–‡æ¡£çš„å¤šä¸ªç»„æˆéƒ¨åˆ†ï¼Œæé«˜APIè°ƒç”¨æ•ˆç‡ã€‚

**Section sources**
- [README.md](file://README.md#L65-L95)
- [main.tsp](file://api/main.tsp#L46-L58)

## ç³»ç»Ÿä¸Šä¸‹æ–‡å›¾

```mermaid
graph TB
subgraph "å¤–éƒ¨ç³»ç»Ÿ"
Client["å®¢æˆ·ç«¯åº”ç”¨"]
IdP["èº«ä»½æä¾›å•†"]
External["å¤–éƒ¨ç³»ç»Ÿ"]
end
subgraph "NexusBook API"
Auth["è®¤è¯æœåŠ¡<br/>OAuth2/OIDC"]
Doc["æ–‡æ¡£æœåŠ¡<br/>æ ¸å¿ƒåŠŸèƒ½"]
Webhook["WebhooksæœåŠ¡<br/>äº‹ä»¶é€šçŸ¥"]
end
Client --> |è®¤è¯| Auth
Client --> |APIè°ƒç”¨| Doc
Auth --> |ä»¤ç‰Œ| Client
Doc --> |äº‹ä»¶| Webhook
Webhook --> |HTTPå›è°ƒ| External
IdP --> |èº«ä»½éªŒè¯| Auth
Doc --> |å®¡è®¡æ—¥å¿—| Auth
style Auth fill:#f9f,stroke:#333
style Doc fill:#bbf,stroke:#333
style Webhook fill:#f96,stroke:#333
```

**Diagram sources**
- [main.tsp](file://api/main.tsp#L96-L134)
- [api/auth/index.tsp](file://api/auth/index.tsp)
- [api/document/index.tsp](file://api/document/index.tsp)
- [api/extensions/webhooks/index.tsp](file://api/extensions/webhooks/index.tsp)

**Section sources**
- [main.tsp](file://api/main.tsp#L96-L134)
- [docs-src/guides/architecture.md](file://docs-src/guides/architecture.md#L122-L219)

## é›†æˆä¸æ‰©å±•

NexusBook APIçš„è®¾è®¡å……åˆ†è€ƒè™‘äº†å¯æ‰©å±•æ€§ï¼Œé€šè¿‡TypeSpecç¼–è¯‘å™¨ã€HTTPè£…é¥°å™¨å’ŒOpenAPI 3.0ç”Ÿæˆå™¨çš„é›†æˆï¼Œæä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ã€‚TypeSpecä½œä¸ºAPIå®šä¹‰è¯­è¨€ï¼Œä¸ä»…æ”¯æŒä¸°å¯Œçš„ç±»å‹ç³»ç»Ÿï¼Œè¿˜å…è®¸é€šè¿‡è£…é¥°å™¨æ·»åŠ å…ƒæ•°æ®å’Œè¡Œä¸ºã€‚

HTTPè£…é¥°å™¨ç”¨äºå®šä¹‰è·¯ç”±ã€è¯·æ±‚æ–¹æ³•å’Œå‚æ•°ç»‘å®šï¼Œä½¿å¾—APIå®šä¹‰æ›´åŠ ç›´è§‚å’Œå¯è¯»ã€‚OpenAPI 3.0ç”Ÿæˆå™¨å°†TypeSpecå®šä¹‰è½¬æ¢ä¸ºæ ‡å‡†çš„APIè§„èŒƒæ–‡æ¡£ï¼Œæ”¯æŒå¤šç§æ ¼å¼è¾“å‡ºï¼Œä¾¿äºä¸å…¶ä»–å·¥å…·é›†æˆã€‚è¿™ç§åŸºäºæ ‡å‡†çš„æ¶æ„ç¡®ä¿äº†APIçš„äº’æ“ä½œæ€§å’Œé•¿æœŸå¯ç»´æŠ¤æ€§ã€‚

ç³»ç»Ÿé¢„ç•™äº†æ‰©å±•æ¨¡å—ç›®å½•(extensions/)ï¼Œæ”¯æŒé€šè¿‡Webhooksä¸å…¶ä»–ç³»ç»Ÿé›†æˆã€‚å¼€å‘è€…å¯ä»¥åŸºäºç°æœ‰çš„APIæ„å»ºè‡ªå®šä¹‰çš„é›†æˆåº”ç”¨ï¼Œå¦‚ä¸CRMã€ERPæˆ–é¡¹ç›®ç®¡ç†å·¥å…·çš„è¿æ¥å™¨ã€‚Provideræ¨¡å¼çš„è®¾è®¡å…è®¸è½»æ¾æ‰©å±•æ–°çš„æ–‡æ¡£ç±»å‹ï¼Œè€Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒAPIå®šä¹‰ã€‚

é€šè¿‡Redoclyç­‰å·¥å…·ï¼Œç”Ÿæˆçš„OpenAPIæ–‡æ¡£å¯ä»¥å‘ˆç°ä¸ºäº¤äº’å¼çš„APIé—¨æˆ·ï¼Œæä¾›åœ¨çº¿æµ‹è¯•ã€ä»£ç ç¤ºä¾‹å’Œå®æ—¶æ–‡æ¡£åŠŸèƒ½ã€‚è¿™ç§ç°ä»£åŒ–çš„å¼€å‘è€…ä½“éªŒé™ä½äº†APIçš„ä½¿ç”¨é—¨æ§›ï¼ŒåŠ é€Ÿäº†é›†æˆå¼€å‘çš„è¿›ç¨‹ã€‚

**Section sources**
- [README.md](file://README.md#L17-L18)
- [package.json](file://package.json#L7-L10)
- [tspconfig.yaml](file://tspconfig.yaml)
- [docs-src/guides/architecture.md](file://docs-src/guides/architecture.md#L364-L383)