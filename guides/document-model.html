<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡æ¡£æ¨¡å‹è¯¦è§£ - NexusBook API æ–‡æ¡£</title>
    <link rel="stylesheet" href="/styles/main.css?v=${Date.now()}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>
    <script>
      if (window.hljs) { hljs.highlightAll(); }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</head>
<body class="has-sidebar">
    <nav class="sidebar">
<div class="sidebar-header">
<a href="/index.html" class="sidebar-logo">NexusBook API</a>
</div>
<div class="sidebar-content">
<div class="sidebar-group expanded">
<div class="sidebar-group-title">å¼€å§‹ä½¿ç”¨</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/index.html">æ¦‚è§ˆ</a>
</li>
<li class="sidebar-item ">
<a href="/guides/getting-started.html">å¿«é€Ÿå¼€å§‹</a>
</li>
<li class="sidebar-item ">
<a href="/guides/authentication.html">è®¤è¯æˆæƒ</a>
</li>
</ul>
</div>
<div class="sidebar-group expanded">
<div class="sidebar-group-title">æ ¸å¿ƒæ¦‚å¿µ</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/guides/document-model.html">æ–‡æ¡£æ¨¡å‹</a>
</li>
<li class="sidebar-item ">
<a href="/guides/data-operations.html">æ•°æ®æ“ä½œ</a>
</li>
<li class="sidebar-item ">
<a href="/guides/webhooks.html">Webhook äº‹ä»¶</a>
</li>
<li class="sidebar-item ">
<a href="/guides/realtime-collaboration.html">å®æ—¶ååŒ</a>
</li>
</ul>
</div>
<div class="sidebar-group expanded">
<div class="sidebar-group-title">API å‚è€ƒ</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/api/index.html">API ç«¯ç‚¹</a>
</li>
<li class="sidebar-item ">
<a href="/references/field-types.html">å­—æ®µç±»å‹</a>
</li>
<li class="sidebar-item ">
<a href="/references/error-codes.html">é”™è¯¯ç </a>
</li>
</ul>
</div>
<div class="sidebar-group ">
<div class="sidebar-group-title">å¼€å‘æŒ‡å—</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/guides/development.html">å¼€å‘ç¯å¢ƒ</a>
</li>
<li class="sidebar-item ">
<a href="/guides/architecture.html">æ¶æ„è®¾è®¡</a>
</li>
<li class="sidebar-item ">
<a href="/guides/best-practices.html">æœ€ä½³å®è·µ</a>
</li>
<li class="sidebar-item ">
<a href="/guides/examples.html">å®Œæ•´ç¤ºä¾‹</a>
</li>
</ul>
</div>
<div class="sidebar-group ">
<div class="sidebar-group-title">å…¶ä»–èµ„æº</div>
<ul class="sidebar-items">
<li class="sidebar-item ">
<a href="/references/i18n.html">å›½é™…åŒ–</a>
</li>
<li class="sidebar-item ">
<a href="/references/changelog.html">æ›´æ–°æ—¥å¿—</a>
</li>
<li class="sidebar-item ">
<a href="/CONTRIBUTING.html">è´¡çŒ®æŒ‡å—</a>
</li>
<li class="sidebar-item ">
<a href="/TROUBLESHOOTING.html">é—®é¢˜æ’æŸ¥</a>
</li>
</ul>
</div>
</div>
</nav>

    
    <div class="main-wrapper">
        <header class="header">
            <div class="container">
                <h1 class="logo"><a href="/index.html">NexusBook API</a></h1>
                <nav class="nav">
                    <a href="/index.html">é¦–é¡µ</a>
                    <a href="/api/" >API å‚è€ƒ</a>
                    <a href="/guides/getting-started.html" class="active">å¼€å‘æŒ‡å—</a>
                    <a href="/references/error-codes.html" >å‚è€ƒæ–‡æ¡£</a>
                    <a href="https://github.com/NexusBook/nexusbook-api" target="_blank">GitHub</a>
                </nav>
            </div>
        </header>

        <main class="main content-page">
            <div class="container">
                <article class="content">
                    <h1>NexusBook æ–‡æ¡£æ¨¡å‹è®¾è®¡æ–‡æ¡£</h1>
<h2>æ¦‚è¿°</h2>
<p>NexusBook çš„<strong>æ–‡æ¡£æ¨¡å‹</strong>æ˜¯ä¸€ä¸ªçµæ´»ã€é«˜åº¦å¯æ‰©å±•çš„æŠ½è±¡æ¡†æ¶ï¼Œç”¨äºç®¡ç†ç»“æ„åŒ–æ•°æ®æ–‡æ¡£ã€‚æ— è®ºæ˜¯è®¢è´§å•ã€å‘ç¥¨ã€äº§å“æ¸…å•ã€é¡¹ç›®è®¡åˆ’ç­‰ä»»ä½•ç±»å‹çš„è¡¨æ ¼å‹æ–‡æ¡£ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªç»Ÿä¸€çš„æ¨¡å‹æ¥ç®¡ç†ã€‚</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Document Bundle                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Properties   â”‚  â”‚   Metadata   â”‚  â”‚    Views     â”‚       â”‚
â”‚  â”‚ (è®¢å•æ—¶é—´ã€   â”‚  â”‚  (å­—æ®µé…ç½®)   â”‚  â”‚  (è§†å›¾å®šä¹‰)   â”‚       â”‚
â”‚  â”‚  é—¨åº—ã€é‡‘é¢)  â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Data (è¡Œé›†åˆ)                           â”‚ â”‚
â”‚  â”‚  - åˆ—è¡¨è¡Œï¼ˆæœ€æ ¸å¿ƒçš„æ•°æ®ï¼‰                                â”‚ â”‚
â”‚  â”‚  - æ”¯æŒåˆ›å»º/æ›´æ–°/åˆ é™¤/æŸ¥è¯¢                               â”‚ â”‚
â”‚  â”‚  - æ”¯æŒæ‰¹é‡æ“ä½œ                                          â”‚ â”‚
â”‚  â”‚  - æ”¯æŒåˆ†é¡µ                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Comments    â”‚  â”‚  Revisions   â”‚  â”‚   Settings   â”‚       â”‚
â”‚  â”‚  (è¯„è®ºè®¨è®º)   â”‚  â”‚  (ä¿®è®¢å†å²)   â”‚  â”‚  (æ–‡æ¡£è®¾ç½®)   â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2>æ ¸å¿ƒå±‚æ¬¡ç»“æ„</h2>
<div class="mermaid">flowchart TD
  D["Document"] --> P["Properties"]
  D --> M["Metadata"]
  D --> V["Views"]
  D --> DA["Data"]
  D --> C["Comments"]
  D --> R["Revisions"]
  D --> S["Settings"]
  M --> DA
  V --> DA
  C --> D
  R --> D</div>
<h2>è®¾è®¡åŸåˆ™ä¸ä¸€è‡´æ€§è§„èŒƒ</h2>
<ul>
<li>æ¸…æ™°åˆ†å±‚ï¼šProperties/Metadata/Data/Views/Comments/Revisions/Settingsã€‚</li>
<li>ä¸€è‡´æ€§åŸåˆ™ï¼šMetadata å®šä¹‰å­—æ®µï¼ŒData å¿…é¡»éµå®ˆï¼›Properties ä¸ Data åˆ†ç¦»ï¼Œé¿å…äº¤å‰æ±¡æŸ“ã€‚</li>
<li>ä¸å¯å˜è®°å½•ï¼šRevision ä¸ºåªè¯»å†å²ï¼Œä¸å¯å˜æ›´ï¼›é€šè¿‡ Revert åˆ›å»ºæ–°çš„å˜æ›´è€Œéä¿®æ”¹å†å²ã€‚</li>
<li>å®¡æ‰¹å…ˆè¡Œï¼šæ‰€æœ‰å†™å…¥é€šè¿‡ Requestï¼Œå®¡æ‰¹é€šè¿‡åç”Ÿæˆ Revision å¹¶è½åº“ã€‚</li>
<li>å¯å®¡è®¡æ€§ï¼šæ¯æ¬¡å†™å…¥éƒ½æœ‰ Request â†’ Revision é“¾è·¯ï¼Œé™„å¸¦ contributorsã€timestampã€‚</li>
<li>å¯æ‰©å±•æ€§ï¼šAttachment ä¸ Relation ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå¯åœ¨ Properties æˆ– Data ä¸­ä½¿ç”¨ã€‚</li>
</ul>
<h2>å¯¹è±¡å…³ç³»æ€»è§ˆ</h2>
<ul>
<li>Document æŒæœ‰ Properties/Metadata/Views/Data/Comments/Revisions/Settingsã€‚</li>
<li>Metadata ä¸ Data å­˜åœ¨å¼ºçº¦æŸï¼šData çš„ <code>values[].fieldId</code> å¿…é¡»å­˜åœ¨äº Metadataã€‚</li>
<li>Views ä¸æŒæœ‰æ•°æ®ï¼Œåªä¿å­˜ <code>config</code>ï¼ˆåˆ—ã€è¿‡æ»¤ã€æ’åºã€åˆ†ç»„ï¼‰ï¼Œç”¨äºæŠ•å½± Dataã€‚</li>
<li>Comments æ”¯æŒå®šä½åˆ° document/field/row/cell å››çº§ã€‚</li>
<li>Revisions è®°å½• ChangeOperation åºåˆ—ï¼ŒæŒ‡å‘æº Requestã€‚</li>
</ul>
<h2>ç”Ÿå‘½å‘¨æœŸä¸å˜æ›´æµ</h2>
<ol>
<li>Draftï¼šåˆå§‹åŒ– Propertiesã€Metadataã€Viewsã€‚</li>
<li>Editï¼šç”¨æˆ·åœ¨ Request ä¸Šåä½œä¿®æ”¹ Data/Propertiesã€‚</li>
<li>Reviewï¼šå®¡æ‰¹æµç¨‹è¿›è¡Œï¼Œå¯èƒ½é€šè¿‡/æ‹’ç»/å›æ»šã€‚</li>
<li>Mergeï¼šåˆå¹¶ç”Ÿæˆ Revisionï¼Œå†»ç»“æ“ä½œå†å²ã€‚</li>
<li>Auditï¼šé€šè¿‡ Revisions/Operations/Diff è¿›è¡Œå®¡è®¡æˆ–å›æº¯ã€‚</li>
</ol>
<h3>1. Propertiesï¼ˆæ–‡æ¡£å±æ€§ï¼‰- å…ƒä¿¡æ¯å±‚</h3>
<p>å­˜å‚¨<strong>æ–‡æ¡£æœ¬èº«çš„å±æ€§ä¿¡æ¯</strong>ï¼Œä¸åŒäºæ•°æ®è¡Œçš„å†…å®¹ã€‚</p>
<h4>ç”¨é€”</h4>
<ul>
<li><strong>è®¢è´§å•</strong>ï¼šè®¢å•æ—¶é—´ã€é—¨åº—ã€æ€»é‡‘é¢ã€æ€»æ•°é‡ã€çŠ¶æ€ã€å¤‡æ³¨</li>
<li><strong>å‘ç¥¨</strong>ï¼šå‘ç¥¨å·ã€å¼€ç¥¨æ—¶é—´ã€ä»˜æ¬¾æœŸé™ã€ç¨ç‡ã€æ”¶æ¬¾æ–¹ä¿¡æ¯</li>
<li><strong>äº§å“</strong>ï¼šSKUã€å“ç‰Œã€åˆ†ç±»ã€ä¾›åº”å•†ã€ç”Ÿäº§æ—¥æœŸ</li>
<li><strong>é¡¹ç›®</strong>ï¼šé¡¹ç›®åç§°ã€è´Ÿè´£äººã€é¢„ç®—ã€æˆªæ­¢æ—¥æœŸã€ä¼˜å…ˆçº§</li>
</ul>
<h4>æ•°æ®ç»“æ„</h4>
<pre><code class="language-typescript">model DocumentProperties {
  id: string;              // å±æ€§è®°å½•ID
  docId: string;           // æ–‡æ¡£ID
  docType: string;         // æ–‡æ¡£ç±»å‹ï¼ˆpurchaseOrder, invoiceç­‰ï¼‰
  
  properties?: {           // çµæ´»çš„é”®å€¼å¯¹å¯¹è±¡
    [key: string]: any     // æ”¯æŒä»»æ„å±æ€§
  };
  
  version?: int64;         // å¹¶å‘æ§åˆ¶ç‰ˆæœ¬å·
  createdAt?: string;      // åˆ›å»ºæ—¶é—´
  updatedAt?: string;      // æ›´æ–°æ—¶é—´
  updatedBy?: string;      // æœ€åä¿®æ”¹äºº
}
</code></pre>
<h4>API ç«¯ç‚¹</h4>
<pre><code>GET    /doc/{docType}/{docId}/properties          # è·å–å±æ€§
POST   /doc/{docType}/{docId}/properties          # åˆ›å»ºå±æ€§
PUT    /doc/{docType}/{docId}/properties          # æ›¿æ¢å±æ€§ï¼ˆå…¨é‡ï¼‰
PATCH  /doc/{docType}/{docId}/properties          # æ›´æ–°å±æ€§ï¼ˆéƒ¨åˆ†ï¼‰
GET    /doc/{docType}/{docId}/properties/history  # æŸ¥çœ‹å±æ€§å†å²
DELETE /doc/{docType}/{docId}/properties          # åˆ é™¤å±æ€§
</code></pre>
<h4>ç¤ºä¾‹ï¼šè®¢è´§å•å±æ€§</h4>
<pre><code class="language-bash"># åˆ›å»ºè®¢è´§å•å±æ€§
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/properties&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;id&quot;: &quot;prop-001&quot;,
    &quot;docId&quot;: &quot;order-123&quot;,
    &quot;docType&quot;: &quot;purchaseOrder&quot;,
    &quot;properties&quot;: {
      &quot;orderTime&quot;: &quot;2024-12-01T10:00:00Z&quot;,
      &quot;store&quot;: &quot;Beijing Branch&quot;,
      &quot;amount&quot;: 5000.00,
      &quot;quantity&quot;: 50,
      &quot;status&quot;: &quot;pending&quot;,
      &quot;notes&quot;: &quot;Urgent delivery required&quot;
    }
  }&#39;

# éƒ¨åˆ†æ›´æ–°å±æ€§ï¼ˆä»…æ›´æ–°é‡‘é¢å’Œæ•°é‡ï¼‰
curl -X PATCH &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/properties?merge=true&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -d &#39;{
    &quot;properties&quot;: {
      &quot;amount&quot;: 6000.00,
      &quot;quantity&quot;: 60
    }
  }&#39;
</code></pre>
<h3>2. Metadataï¼ˆå…ƒæ•°æ®ï¼‰- å­—æ®µå®šä¹‰å±‚</h3>
<p>å®šä¹‰æ–‡æ¡£çš„<strong>å­—æ®µç»“æ„</strong>ï¼Œæè¿°æ¯ä¸ªå­—æ®µçš„ç±»å‹ã€éªŒè¯è§„åˆ™ã€æ˜¾ç¤ºæ–¹å¼ç­‰ã€‚</p>
<h4>ç”¨é€”</h4>
<ul>
<li>å®šä¹‰æ–‡æ¡£åŒ…å«å“ªäº›å­—æ®µï¼ˆå¦‚è®¢è´§å•çš„&quot;äº§å“åç§°&quot;&quot;æ•°é‡&quot;&quot;å•ä»·&quot;ç­‰ï¼‰</li>
<li>æŒ‡å®šå­—æ®µçš„æ•°æ®ç±»å‹ï¼ˆæ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸã€é€‰æ‹©ç­‰ï¼‰</li>
<li>é…ç½®å­—æ®µçš„éªŒè¯è§„åˆ™ã€æ˜¾ç¤ºåç§°ã€å¸®åŠ©æç¤ºç­‰</li>
<li>å®šä¹‰å­—æ®µçš„è¯»å†™æƒé™</li>
</ul>
<h4>æ•°æ®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="language-typescript">model Metadata {
  id: string;              // å…ƒæ•°æ®ID
  docId: string;
  docType: string;
  
  fields?: Field[];        // å­—æ®µå®šä¹‰æ•°ç»„
  version?: int64;
  createdAt?: string;
  updatedAt?: string;
}

model Field {
  id: string;              // å­—æ®µIDï¼ˆåœ¨è¡¨å•ä¸­ä½œä¸ºcolumnï¼‰
  name: string;            // å­—æ®µæ˜¾ç¤ºå
  type: &quot;text&quot; | &quot;number&quot; | &quot;date&quot; | &quot;select&quot; | ...;
  required?: boolean;
  pattern?: string;        // éªŒè¯æ­£åˆ™
  description?: string;    // å­—æ®µè¯´æ˜
}
</code></pre>
<h4>ç¤ºä¾‹</h4>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;meta-order-123&quot;,
  &quot;docId&quot;: &quot;order-123&quot;,
  &quot;docType&quot;: &quot;purchaseOrder&quot;,
  &quot;fields&quot;: [
    {
      &quot;id&quot;: &quot;productName&quot;,
      &quot;name&quot;: &quot;äº§å“åç§°&quot;,
      &quot;type&quot;: &quot;text&quot;,
      &quot;required&quot;: true
    },
    {
      &quot;id&quot;: &quot;quantity&quot;,
      &quot;name&quot;: &quot;æ•°é‡&quot;,
      &quot;type&quot;: &quot;number&quot;,
      &quot;required&quot;: true,
      &quot;pattern&quot;: &quot;^[1-9]\\d*$&quot;
    },
    {
      &quot;id&quot;: &quot;price&quot;,
      &quot;name&quot;: &quot;å•ä»·&quot;,
      &quot;type&quot;: &quot;number&quot;,
      &quot;required&quot;: true
    }
  ]
}
</code></pre>
<h3>3. Dataï¼ˆæ•°æ®ï¼‰- å†…å®¹å±‚</h3>
<p>å­˜å‚¨<strong>å®é™…çš„æ•°æ®è¡Œ</strong>ï¼Œè¿™æ˜¯æ–‡æ¡£çš„æ ¸å¿ƒå†…å®¹ã€‚</p>
<h4>ç”¨é€”</h4>
<ul>
<li>è®¢è´§å•çš„æ¯ä¸€ä¸ªè®¢å•é¡¹ï¼ˆäº§å“åç§°ã€æ•°é‡ã€å•ä»·ç­‰ï¼‰</li>
<li>å‘ç¥¨çš„æ¯ä¸€æ¡æ˜ç»†è¡Œ</li>
<li>åº“å­˜è¡¨çš„æ¯ä¸€æ¡äº§å“è®°å½•</li>
<li>é¡¹ç›®è®¡åˆ’çš„æ¯ä¸€ä¸ªä»»åŠ¡è¡Œ</li>
</ul>
<h4>æ•°æ®ç»“æ„</h4>
<pre><code class="language-typescript">model Row {
  id: string;              // è¡ŒID
  
  values: {                // å­—æ®µå€¼é›†åˆ
    fieldId: string;       // å­—æ®µIDï¼ˆå¯¹åº”Metadataä¸­å®šä¹‰ï¼‰
    value: {               // å®é™…å€¼ï¼Œæ”¯æŒå¤šç§ç±»å‹
      text?: string;
      number?: number;
      date?: string;
      select?: string;
    };
  }[];
  
  version?: int64;         // ç”¨äºå¹¶å‘æ§åˆ¶
  createdAt?: string;
  createdBy?: string;
  updatedAt?: string;
  updatedBy?: string;
}
</code></pre>
<h4>API ç«¯ç‚¹</h4>
<pre><code>GET    /doc/{docType}/{docId}/rows                          # æŸ¥è¯¢è¡Œï¼ˆåˆ†é¡µï¼‰
POST   /doc/{docType}/{docId}/rows                          # åˆ›å»ºè¡Œï¼ˆéœ€ requestIdï¼‰
PUT    /doc/{docType}/{docId}/rows/{rowId}                  # æ›´æ–°è¡Œï¼ˆéœ€ requestIdï¼‰
DELETE /doc/{docType}/{docId}/rows/{rowId}                  # åˆ é™¤è¡Œï¼ˆéœ€ requestIdï¼‰

# ä¸‹åˆ—æ‰¹é‡ç«¯ç‚¹ä¸­ï¼Œæ‰¹é‡åˆ›å»ºï¼ˆbatch-createï¼‰å·²åºŸå¼ƒï¼Œç»Ÿä¸€ä½¿ç”¨æ‰¹é‡æ›´æ–°ï¼ˆbatch-updateï¼ŒBulkUpdate æ ¼å¼ï¼‰
# æ‰€æœ‰å†™æ“ä½œéƒ½å¿…é¡»æºå¸¦ requestId
POST   /doc/{docType}/{docId}/rows/batch-update             # æ‰¹é‡æ›´æ–°ï¼ˆBulkUpdateï¼‰
POST   /doc/{docType}/{docId}/rows/batch-delete             # æ‰¹é‡åˆ é™¤ï¼ˆéœ€ requestIdï¼‰
</code></pre>
<h4>æ‰¹é‡æ›´æ–°ï¼ˆBulkUpdateï¼‰æ ¼å¼</h4>
<ul>
<li>ä½¿ç”¨çµæ´»çš„ <code>target</code> + åŸå§‹ <code>value</code> ç»“æ„ï¼›æœåŠ¡ç«¯æ ¹æ® <code>metadata</code> è‡ªåŠ¨è§£æã€‚</li>
<li><code>value</code> å¯ä»¥æ˜¯å•å€¼æˆ–å¯¹è±¡ï¼Œäº¦å¯ä¸ºæ•°ç»„ï¼›å¯ä»¥åŒæ—¶æ›´æ–°æ•°æ®è¡Œæˆ–æ–‡æ¡£å±æ€§ã€‚</li>
</ul>
<pre><code class="language-json">[
  {&quot;target&quot;: {&quot;row&quot;: &quot;row-1&quot;, &quot;field&quot;: &quot;price&quot;}, &quot;value&quot;: 99.99},
  {&quot;target&quot;: {&quot;row&quot;: &quot;row-2&quot;}, &quot;value&quot;: {&quot;productName&quot;: &quot;iPhone 15&quot;, &quot;quantity&quot;: 50}},
  {&quot;target&quot;: {&quot;rows&quot;: [&quot;row-3&quot;, &quot;row-4&quot;], &quot;field&quot;: &quot;status&quot;}, &quot;value&quot;: &quot;active&quot;},
  {&quot;target&quot;: {&quot;property&quot;: &quot;amount&quot;}, &quot;value&quot;: 5000.00},
  {&quot;target&quot;: {&quot;properties&quot;: true}, &quot;value&quot;: {&quot;amount&quot;: 5000, &quot;quantity&quot;: 100}}
]
</code></pre>
<h4>å†™æ“ä½œçš„ requestId å·¥ä½œæµ</h4>
<ul>
<li>æ‰€æœ‰å†™æ“ä½œï¼ˆåˆ›å»º/æ›´æ–°/åˆ é™¤/æ‰¹é‡æ›´æ–°ï¼‰éƒ½å¿…é¡»æºå¸¦ <code>requestId</code>ã€‚</li>
<li>å®¢æˆ·ç«¯é€šè¿‡åŒä¸€ä¸ª <code>requestId</code> ååŒç¼–è¾‘ï¼›å®¡æ‰¹é€šè¿‡åæ‰å†™å…¥ç”Ÿæ•ˆç‰ˆæœ¬ï¼›ä¸æ”¯æŒç›´æ¥ <code>apply</code>ã€‚</li>
<li>ç¤ºä¾‹ï¼š<code>POST /doc/{docType}/{docId}/rows?requestId=req-1</code> æˆ–åœ¨è¯·æ±‚ä½“ä¸­åŒ…å« <code>{&quot;requestId&quot;:&quot;req-1&quot;}</code>ã€‚</li>
</ul>
<h4>ç¤ºä¾‹</h4>
<pre><code class="language-bash"># åˆ›å»ºä¸€è¡Œæ•°æ®ï¼ˆæºå¸¦ requestIdï¼‰
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/rows?requestId=req-1&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;values&quot;: [
      { &quot;fieldId&quot;: &quot;productName&quot;, &quot;value&quot;: { &quot;text&quot;: &quot;iPhone 15&quot; } },
      { &quot;fieldId&quot;: &quot;quantity&quot;,    &quot;value&quot;: { &quot;number&quot;: 10 } },
      { &quot;fieldId&quot;: &quot;price&quot;,       &quot;value&quot;: { &quot;number&quot;: 799.99 } }
    ]
  }&#39;

# æ‰¹é‡æ›´æ–°ï¼ˆBulkUpdateï¼Œç»Ÿä¸€æ ¼å¼ï¼›æœåŠ¡ç«¯æ ¹æ® metadata è§£æï¼‰
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/rows/batch-update?requestId=req-1&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;[
    {&quot;target&quot;: {&quot;row&quot;: &quot;row-1&quot;, &quot;field&quot;: &quot;price&quot;}, &quot;value&quot;: 99.99},
    {&quot;target&quot;: {&quot;row&quot;: &quot;row-2&quot;}, &quot;value&quot;: {&quot;productName&quot;: &quot;iPhone 15&quot;, &quot;quantity&quot;: 50}},
    {&quot;target&quot;: {&quot;rows&quot;: [&quot;row-3&quot;,&quot;row-4&quot;], &quot;field&quot;: &quot;status&quot;}, &quot;value&quot;: &quot;active&quot;}
  ]&#39;
</code></pre>
<blockquote>
<p>æ³¨ï¼šæ‰¹é‡åˆ›å»ºï¼ˆ<code>batch-create</code>ï¼‰å·²åºŸå¼ƒï¼Œè¯·ä½¿ç”¨æ‰¹é‡æ›´æ–°ï¼ˆ<code>batch-update</code> + BulkUpdate ç»“æ„ï¼‰æ¥è¿›è¡Œå¤šè¡Œæ•°æ®çš„å†™å…¥ä¸ä¿®æ”¹ï¼›æœ€ç»ˆå†™å…¥éœ€é€šè¿‡å®¡æ‰¹åˆå¹¶ã€‚</p>
</blockquote>
<h3>4. Viewsï¼ˆè§†å›¾ï¼‰- å±•ç¤ºå±‚</h3>
<p>å®šä¹‰<strong>ä¸åŒçš„æ•°æ®å±•ç¤ºæ–¹å¼</strong>ã€‚åŒä¸€ä»½æ•°æ®å¯ä»¥ç”¨å¤šç§è§†å›¾å±•ç¤ºã€‚</p>
<h4>ç”¨é€”</h4>
<ul>
<li><strong>è¡¨æ ¼è§†å›¾</strong>ï¼šæ ‡å‡†è¡Œåˆ—è¡¨å±•ç¤º</li>
<li><strong>çœ‹æ¿è§†å›¾</strong>ï¼šæŒ‰çŠ¶æ€åˆ†ç±»å±•ç¤º</li>
<li><strong>æ—¥å†è§†å›¾</strong>ï¼šæŒ‰æ—¥æœŸç»„ç»‡</li>
<li><strong>ç»Ÿè®¡è§†å›¾</strong>ï¼šæ•°æ®æ±‡æ€»å±•ç¤º</li>
<li><strong>è‡ªå®šä¹‰è§†å›¾</strong>ï¼šç”¨æˆ·å®šä¹‰çš„è¿‡æ»¤/æ’åº/åˆ†ç»„æ–¹å¼</li>
</ul>
<h4>æ•°æ®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="language-typescript">model View {
  id: string;              // è§†å›¾ID
  name: string;            // è§†å›¾åç§°
  type: &quot;table&quot; | &quot;kanban&quot; | &quot;calendar&quot; | &quot;chart&quot; | ...;
  
  config?: {               // è§†å›¾é…ç½®
    columns?: string[];    // æ˜¾ç¤ºçš„å­—æ®µ
    filters?: Filter[];    // è¿‡æ»¤æ¡ä»¶
    sort?: SortField[];    // æ’åºè§„åˆ™
    groupBy?: string;      // åˆ†ç»„å­—æ®µ
  };
}
</code></pre>
<h4>ç¤ºä¾‹</h4>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;view-pending&quot;,
  &quot;name&quot;: &quot;å¾…å¤„ç†è®¢å•&quot;,
  &quot;type&quot;: &quot;table&quot;,
  &quot;config&quot;: {
    &quot;columns&quot;: [&quot;productName&quot;, &quot;quantity&quot;, &quot;price&quot;],
    &quot;filters&quot;: [
      {
        &quot;fieldId&quot;: &quot;status&quot;,
        &quot;operator&quot;: &quot;equals&quot;,
        &quot;value&quot;: &quot;pending&quot;
      }
    ],
    &quot;sort&quot;: [
      {
        &quot;fieldId&quot;: &quot;orderTime&quot;,
        &quot;direction&quot;: &quot;desc&quot;
      }
    ]
  }
}
</code></pre>
<h3>5. Commentsï¼ˆè¯„è®ºï¼‰- åä½œå±‚</h3>
<p>åœ¨<strong>ä»»ä½•ä½ç½®</strong>ï¼ˆæ–‡æ¡£ã€å­—æ®µã€è¡Œã€å•å…ƒæ ¼ï¼‰æ·»åŠ <strong>è¯„è®ºã€è®¨è®ºå’Œåé¦ˆ</strong>ã€‚</p>
<h4>ç”¨é€”</h4>
<ul>
<li>å¯¹æ•´ä¸ªè®¢è´§å•è¿›è¡Œè®¨è®º</li>
<li>å¯¹æŸä¸€è¡Œäº§å“æå‡ºé—®é¢˜</li>
<li>å¯¹æŸä¸ªå­—æ®µå€¼è¿›è¡Œè¯„è®º</li>
<li>å¯¹æŸä¸ªå•å…ƒæ ¼æ ‡è®°é—®é¢˜</li>
</ul>
<h4>æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>ç²¾ç¡®å®šä½</strong>ï¼šæ”¯æŒåœ¨æ–‡æ¡£/å­—æ®µ/è¡Œ/å•å…ƒæ ¼çº§åˆ«è¯„è®º</li>
<li><strong>è¯„è®ºçº¿ç¨‹</strong>ï¼šé€šè¿‡ <code>parentId</code> å½¢æˆå›å¤é“¾</li>
<li><strong>è¡¨æƒ…ååº”</strong>ï¼šå¯ä»¥å¯¹è¯„è®ºæ·»åŠ  emoji ååº”</li>
<li><strong>è§£å†³çŠ¶æ€</strong>ï¼šæ ‡è®°è¯„è®ºæ˜¯å¦å·²è§£å†³</li>
</ul>
<h4>æ•°æ®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="language-typescript">model Comment {
  id: string;
  
  target: {                // è¯„è®ºä½ç½®ï¼ˆç²¾ç¡®åˆ°å„å±‚çº§ï¼‰
    scope: &quot;document&quot; | &quot;field&quot; | &quot;row&quot; | &quot;cell&quot;;
    fieldId?: string;
    rowId?: string;
  };
  
  parentId?: string;       // å›å¤çš„è¯„è®ºIDï¼ˆç”¨äºçº¿ç¨‹ï¼‰
  content: string;         // è¯„è®ºå†…å®¹
  mentions?: string[];     // @æåŠçš„ç”¨æˆ·
  
  reactions?: {            // emojiè¡¨æƒ…ååº”
    emoji: string;         // è¡¨æƒ…ç¬¦å·
    users: string[];       // æ·»åŠ ååº”çš„ç”¨æˆ·
    count: int32;
  }[];
  
  resolved?: boolean;      // æ˜¯å¦å·²è§£å†³
  replyCount?: int32;      // å›å¤æ•°é‡
  
  createdAt?: string;
  createdBy?: string;
}
</code></pre>
<h4>API ç«¯ç‚¹</h4>
<pre><code>GET    /doc/{docType}/{docId}/comments                       # æŸ¥è¯¢è¯„è®º
POST   /doc/{docType}/{docId}/comments                       # åˆ›å»ºè¯„è®º
PUT    /doc/{docType}/{docId}/comments/{commentId}           # æ›´æ–°è¯„è®º
DELETE /doc/{docType}/{docId}/comments/{commentId}           # åˆ é™¤è¯„è®º

POST   /doc/{docType}/{docId}/comments/{commentId}/pin       # ç½®é¡¶è¯„è®º
POST   /doc/{docType}/{docId}/comments/{commentId}/resolve   # æ ‡è®°è§£å†³
POST   /doc/{docType}/{docId}/comments/{commentId}/reactions # æ·»åŠ ååº”
</code></pre>
<h4>ç¤ºä¾‹</h4>
<pre><code class="language-bash"># å¯¹æ•´ä¸ªæ–‡æ¡£è¿›è¡Œè¯„è®º
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/comments&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -d &#39;{
    &quot;content&quot;: &quot;è¯·å°½å¿«å¤„ç†è¿™ä¸ªè®¢å•&quot;,
    &quot;target&quot;: {
      &quot;scope&quot;: &quot;document&quot;
    },
    &quot;mentions&quot;: [&quot;@user-456&quot;]
  }&#39;

# å¯¹æŸä¸€è¡Œè¿›è¡Œè¯„è®º
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/comments&#39; \
  -d &#39;{
    &quot;content&quot;: &quot;è¿™è¡Œçš„æ•°é‡ä¼¼ä¹æœ‰è¯¯&quot;,
    &quot;target&quot;: {
      &quot;scope&quot;: &quot;row&quot;,
      &quot;rowId&quot;: &quot;row-001&quot;
    }
  }&#39;

# å¯¹æŸä¸ªå•å…ƒæ ¼è¿›è¡Œè¯„è®º
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/comments&#39; \
  -d &#39;{
    &quot;content&quot;: &quot;å•ä»·éœ€è¦ç¡®è®¤&quot;,
    &quot;target&quot;: {
      &quot;scope&quot;: &quot;cell&quot;,
      &quot;rowId&quot;: &quot;row-001&quot;,
      &quot;fieldId&quot;: &quot;price&quot;
    }
  }&#39;

# å›å¤æŸä¸ªè¯„è®ºï¼ˆçº¿ç¨‹ï¼‰
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/comments&#39; \
  -d &#39;{
    &quot;content&quot;: &quot;æˆ‘æ¥æ£€æŸ¥ä¸€ä¸‹&quot;,
    &quot;parentId&quot;: &quot;comment-001&quot;
  }&#39;

# å¯¹è¯„è®ºæ·»åŠ è¡¨æƒ…ååº”
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/comments/comment-001/reactions&#39; \
  -d &#39;{
    &quot;emoji&quot;: &quot;ğŸ‘&quot;
  }&#39;
</code></pre>
<h3>6. Revisionsï¼ˆä¿®è®¢ï¼‰- ç‰ˆæœ¬æ§åˆ¶å±‚</h3>
<p>è®°å½•æ–‡æ¡£<strong>æ‰€æœ‰çš„å˜æ›´å†å²</strong>ï¼Œæ”¯æŒç‰ˆæœ¬æ¯”å¯¹å’Œå›æ»šã€‚</p>
<h4>ç”¨é€”</h4>
<ul>
<li>è·Ÿè¸ªè°åœ¨ä»€ä¹ˆæ—¶å€™ä¿®æ”¹äº†ä»€ä¹ˆ</li>
<li>å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚</li>
<li>å®¡è®¡å®Œæ•´çš„å˜æ›´å†å²</li>
<li>å¿…è¦æ—¶å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬</li>
</ul>
<h4>æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>å®Œæ•´è®°å½•</strong>ï¼šè®°å½•æ¯ä¸€ä¸ªæ“ä½œï¼ˆåˆ›å»º/æ›´æ–°/åˆ é™¤ï¼‰</li>
<li><strong>å¤šäººåä½œ</strong>ï¼šè®°å½•æ‰€æœ‰å‚ä¸ç¼–è¾‘çš„äººå‘˜</li>
<li><strong>è¯·æ±‚å…³è”</strong>ï¼šä¿®è®¢ç”±åˆå¹¶è¯·æ±‚è‡ªåŠ¨ç”Ÿæˆ</li>
<li><strong>é“¾å¼å†å²</strong>ï¼šé€šè¿‡ <code>previousRevisionId</code> å¿«é€Ÿå¯¼èˆª</li>
</ul>
<h4>æ•°æ®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="language-typescript">model ChangeOperation {
  id: string;
  
  type: string;            // æ“ä½œç±»å‹ï¼šrow-create/update/deleteç­‰
  
  target: {                // æ“ä½œç›®æ ‡ä½ç½®
    kind: string;
    rowId?: string;
    fieldId?: string;
  };
  
  oldValue?: any;          // ä¿®æ”¹å‰çš„å€¼
  newValue?: any;          // ä¿®æ”¹åçš„å€¼
  operator?: string;       // æ“ä½œäºº
  timestamp?: string;      // æ“ä½œæ—¶é—´
  note?: string;           // æ“ä½œè¯´æ˜
}

model Revision {
  id: string;
  version: int64;          // ç‰ˆæœ¬å·
  
  requestId?: string;      // æºåˆå¹¶è¯·æ±‚ID
  title?: string;
  description?: string;
  
  contributors?: string[]; // æ‰€æœ‰è´¡çŒ®è€…
  mergedBy?: string;       // åˆå¹¶æ‰§è¡Œè€…
  
  changes?: ChangeOperation[];  // æ‰€æœ‰å˜æ›´æ“ä½œ
  
  stats?: {                // ç»Ÿè®¡ä¿¡æ¯
    rowsCreated?: int32;
    rowsUpdated?: int32;
    rowsDeleted?: int32;
    fieldsCreated?: int32;
    fieldsUpdated?: int32;
    fieldsDeleted?: int32;
  };
  
  previousRevisionId?: string;  // å‰ä¸€ä¸ªä¿®è®¢ID
  createdAt?: string;
}
</code></pre>
<h4>API ç«¯ç‚¹</h4>
<pre><code>GET    /doc/{docType}/{docId}/revisions                      # æŸ¥è¯¢ä¿®è®¢å†å²
GET    /doc/{docType}/{docId}/revisions/{revId}              # è·å–ä¿®è®¢è¯¦æƒ…
GET    /doc/{docType}/{docId}/revisions/{revId}/operations   # æŸ¥çœ‹ä¿®è®¢ä¸­çš„æ‰€æœ‰æ“ä½œ
GET    /doc/{docType}/{docId}/revisions/{revId}/diff         # å¯¹æ¯”ä¸¤ä¸ªä¿®è®¢
GET    /doc/{docType}/{docId}/revisions/history              # æŸ¥è¯¢ç‰¹å®šå¯¹è±¡çš„å˜æ›´å†å²
POST   /doc/{docType}/{docId}/revisions/{revId}/revert       # å›æ»šåˆ°æŒ‡å®šä¿®è®¢
</code></pre>
<h4>ç¤ºä¾‹</h4>
<pre><code class="language-bash"># æŸ¥çœ‹ä¿®è®¢å†å²
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/revisions&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;

# å¯¹æ¯”ä¸¤ä¸ªä¿®è®¢ä¹‹é—´çš„å·®å¼‚
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/revisions/rev-002/diff?base=rev-001&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;

# æŸ¥è¯¢æŸè¡Œçš„å®Œæ•´å˜æ›´å†å²
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/revisions/history?targetKind=row&amp;rowId=row-001&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;

# å›æ»šåˆ°æŒ‡å®šä¿®è®¢
curl -X POST &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/revisions/rev-001/revert&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -d &#39;{
    &quot;reason&quot;: &quot;æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€&quot;
  }&#39;
</code></pre>
<h3>7. Settingsï¼ˆè®¾ç½®ï¼‰- é…ç½®å±‚</h3>
<p>æ–‡æ¡£çº§åˆ«çš„<strong>é…ç½®å’Œé€‰é¡¹</strong>ã€‚</p>
<h4>ç”¨é€”</h4>
<ul>
<li>æ–‡æ¡£çš„è®¿é—®æƒé™</li>
<li>é€šçŸ¥è®¾ç½®</li>
<li>å·¥ä½œæµé…ç½®</li>
<li>è‡ªå®šä¹‰è§„åˆ™</li>
</ul>
<h4>ç¤ºä¾‹</h4>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;settings-order-123&quot;,
  &quot;docType&quot;: &quot;purchaseOrder&quot;,
  &quot;permissions&quot;: {
    &quot;view&quot;: [&quot;user-1&quot;, &quot;team-1&quot;],
    &quot;edit&quot;: [&quot;user-1&quot;, &quot;user-2&quot;],
    &quot;delete&quot;: [&quot;user-1&quot;],
    &quot;share&quot;: [&quot;user-1&quot;]
  },
  &quot;notifications&quot;: {
    &quot;onCommentAdd&quot;: true,
    &quot;onDataChange&quot;: true,
    &quot;onMerge&quot;: true
  },
  &quot;workflow&quot;: {
    &quot;requiresApproval&quot;: true,
    &quot;approvers&quot;: [&quot;user-manager&quot;]
  }
}
</code></pre>
<h2>è·¨æ–‡æ¡£å…³è”ï¼ˆRelationï¼‰ä¸é™„ä»¶ï¼ˆAttachmentsï¼‰</h2>
<h3>è®¾è®¡ç›®æ ‡</h3>
<ul>
<li>è§£è€¦æ•°æ®å®ä½“ï¼Œé€šè¿‡â€œè¾¹â€è¿æ¥ä¸åŒæ–‡æ¡£æˆ–è¡Œï¼Œå½¢æˆå¯å¯¼èˆªçš„ä¸šåŠ¡å›¾è°±</li>
<li>æä¾›åŒå‘å…³è”ï¼Œæ”¯æŒå¿«é€ŸæŸ¥è¯¢å…¥è¾¹ä¸å‡ºè¾¹ï¼Œæé«˜è·¨æ–‡æ¡£æ“ä½œçš„å¯ç”¨æ€§</li>
<li>ä¿æŒå¼•ç”¨å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰ï¼Œåœ¨åˆ é™¤/åˆå¹¶/å…‹éš†ç­‰æ“ä½œä¸­æä¾›æ˜ç¡®çš„çº§è”ç­–ç•¥</li>
<li>æƒé™å¯æ§ï¼šè·¨æ–‡æ¡£å…³è”éµå¾ªæº/ç›®æ ‡æ–‡æ¡£çš„è®¿é—®æ§åˆ¶ï¼Œä¸è¶Šæƒ</li>
</ul>
<h3>æ¨¡å‹å®šä¹‰ï¼ˆé€»è¾‘æ¨¡å‹ï¼‰</h3>
<pre><code class="language-typescript">// é€»è¾‘æ¨¡å‹ï¼ˆè¯´æ˜æ€§ï¼‰ï¼Œå®é™…ä»¥ OpenAPI/TypeSpec ä¸ºå‡†
model RelationEdge {
  id: string;
  type: string;           // å…³ç³»ç±»å‹ï¼šdepends_on | references | contains | blocks | linked_to ...
  direction: &quot;uni&quot; | &quot;bi&quot;; // å•å‘æˆ–åŒå‘ï¼ˆbi è¡¨ç¤ºå¯¹ç§°å…³ç³»ï¼‰

  source: {
    docType: string;
    docId: string;
    rowId?: string;       // å¯é€‰ï¼šæŒ‡å‘å…·ä½“è¡Œï¼ˆcell çº§ä¸ç›´æ¥å»ºè¾¹ï¼Œå»ºè®®é€šè¿‡è¡Œ + field æ ‡è¯†ï¼‰
  };

  target: {
    docType: string;
    docId: string;
    rowId?: string;
  };

  metadata?: Record&lt;string, unknown&gt;; // è¾…åŠ©ä¿¡æ¯ï¼ˆæƒé‡ã€æ ‡ç­¾ã€å¤‡æ³¨ç­‰ï¼‰
  createdBy?: string;
  createdAt?: string;
}
</code></pre>
<ul>
<li>è¾¹ï¼ˆEdgeï¼‰ä¸ºä¸€ç­‰å…¬æ°‘ï¼šä¸åµŒå…¥åˆ°ä»»æ„ä¸€ä¾§æ–‡æ¡£ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œä¾¿äºæŸ¥è¯¢å’Œæ²»ç†</li>
<li><code>type</code> å»ºè®®é‡‡ç”¨å—æ§æšä¸¾ï¼Œåœ¨ä¸šåŠ¡åŸŸå†…çº¦æŸè¯­ä¹‰ï¼›ä¹Ÿå¯å…è®¸è‡ªå®šä¹‰å‰ç¼€ï¼ˆå¦‚ <code>custom:rel</code>ï¼‰</li>
</ul>
<h3>å…³ç³»ç±»å‹ä¸åŸºæ•°ï¼ˆCardinalityï¼‰</h3>
<ul>
<li>æ–‡æ¡£ â†” æ–‡æ¡£ï¼š<code>doc</code> ä¸ <code>doc</code> ä¹‹é—´çš„å…³è”ï¼ˆå¦‚å‘ç¥¨ä¾èµ–è®¢è´§å•ï¼‰</li>
<li>è¡Œ â†” è¡Œï¼š<code>row</code> ä¸ <code>row</code> ä¹‹é—´çš„ç»†ç²’åº¦å¼•ç”¨ï¼ˆå¦‚æ˜ç»†è¡Œå¯¹é½ï¼‰</li>
<li>è¡Œ â†” æ–‡æ¡£ï¼š<code>row</code> æŒ‡å‘ <code>doc</code>ï¼ˆå¦‚æŸåº“å­˜è¡Œå…³è”åˆ°äº§å“èµ„æ–™æ–‡æ¡£ï¼‰</li>
<li>åŸºæ•°ï¼šä¸€å¯¹ä¸€/ä¸€å¯¹å¤š/å¤šå¯¹å¤šå‡é€šè¿‡ Edge è¡¨ç¤ºï¼Œä¸é¢å¤–åŒºåˆ†ï¼›ç”±æŸ¥è¯¢æ¡ä»¶ä¸ä¸šåŠ¡çº¦æŸæ§åˆ¶</li>
</ul>
<h3>API è®¾è®¡ï¼ˆå»ºè®®ï¼‰</h3>
<pre><code>GET    /doc/{docType}/{docId}/relations                # æŸ¥è¯¢å‡ºè¾¹ï¼ˆfrom å½“å‰æ–‡æ¡£/å¯é€‰æŒ‰ rowIdï¼‰
GET    /doc/{docType}/{docId}/relations/inbound        # æŸ¥è¯¢å…¥è¾¹ï¼ˆæŒ‡å‘å½“å‰æ–‡æ¡£/å¯é€‰æŒ‰ rowIdï¼‰
POST   /relations                                      # åˆ›å»ºå…³ç³»ï¼ˆè¯·æ±‚ä½“åŒ…å« source/target/type/metadataï¼‰
PUT    /relations/{relId}                              # æ›´æ–°å…³ç³»ï¼ˆä»… metadata/typeï¼‰
DELETE /relations/{relId}                              # åˆ é™¤å…³ç³»
POST   /relations/query                                # å¤æ‚æŸ¥è¯¢ï¼ˆæŒ‰ç±»å‹ã€èŒƒå›´ã€æ–¹å‘ã€æ–‡æ¡£é›†åˆã€åˆ†é¡µï¼‰
</code></pre>
<ul>
<li>åˆ›å»º/æ›´æ–°/åˆ é™¤å‡èµ° <code>requestId</code> å·¥ä½œæµï¼›å®¡æ‰¹é€šè¿‡åå…³ç³»ç”Ÿæ•ˆå¹¶å…¥ä¿®è®¢ï¼ˆRevisionï¼‰</li>
<li>æŸ¥è¯¢é»˜è®¤åˆ†é¡µï¼Œæ”¯æŒæŒ‰ç…§ <code>type/direction/docType/docId/rowId</code> è¿‡æ»¤</li>
</ul>
<h3>ä¸€è‡´æ€§ä¸çº§è”ç­–ç•¥</h3>
<ul>
<li>åˆ é™¤ç­–ç•¥ï¼ˆå»ºè®®é»˜è®¤ï¼šé™åˆ¶åˆ é™¤ï¼‰<ul>
<li>åˆ é™¤ç›®æ ‡æ–‡æ¡£/è¡Œæ—¶ï¼Œå¦‚å­˜åœ¨å…³ç³»è¾¹ï¼Œè¿”å› <code>RELATION_CONFLICT</code>ï¼Œå¼•å¯¼ç”¨æˆ·å…ˆè§£é™¤å…³ç³»æˆ–æ”¹ä¸ºè½¯åˆ </li>
<li>å¯é…ç½®æŸäº› <code>type</code> æ”¯æŒâ€œçº§è”åˆ é™¤â€ï¼Œä½†éœ€è°¨æ…ä½¿ç”¨å¹¶åœ¨å®¡è®¡ä¸­è®°å½•</li>
</ul>
</li>
<li>åˆå¹¶ä¸å…‹éš†<ul>
<li>åˆå¹¶æ–‡æ¡£ï¼šä¿ç•™æŒ‡å‘åˆå¹¶åå®ä½“çš„è¾¹ï¼Œæ—§å®ä½“è¾¹è¿ç§»ï¼›åœ¨ä¿®è®¢ä¸­è®°å½•è‡ªåŠ¨è¿ç§»æ“ä½œ</li>
<li>å…‹éš†è¡Œ/æ–‡æ¡£ï¼šé»˜è®¤ä¸å¤åˆ¶è¾¹ï¼›å¯é€‰å¼€å¯â€œè¾¹å¤åˆ¶â€ç­–ç•¥ï¼ˆå¤åˆ¶ä¸ºæ–°è¾¹å¹¶æŒ‡å‘å…‹éš†ç›®æ ‡ï¼‰</li>
</ul>
</li>
<li>äº‹åŠ¡ä¸å®¡è®¡<ul>
<li>å…³ç³»å˜æ›´ä¸æ•°æ®å˜æ›´åŒå±è¯·æ±‚å†…äº‹åŠ¡ï¼Œå®¡æ‰¹é€šè¿‡åç»Ÿä¸€ç”Ÿæˆ Revision çš„ <code>ChangeOperation</code> è®°å½•</li>
</ul>
</li>
</ul>
<h3>æƒé™ä¸å®‰å…¨</h3>
<ul>
<li>è¯»å–è¾¹ï¼šéœ€è¦å¯¹ <code>source</code> ä¸ <code>target</code> è‡³å°‘å…·å¤‡è¯»å–æƒé™ï¼ˆå»ºè®®ä»¥æ›´ä¸¥æ ¼è€…ä¸ºå‡†ï¼‰</li>
<li>å†™å…¥è¾¹ï¼šéœ€è¦å¯¹ <code>source</code> å…·å¤‡å†™æƒé™ï¼Œå¹¶æ»¡è¶³ç»„ç»‡/ç©ºé—´ç­–ç•¥ï¼ˆå¦‚è·¨ç§Ÿæˆ·ç¦æ­¢ï¼‰</li>
<li>è·¨æ–‡æ¡£è¾¹çš„æš´éœ²éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼Œå¿…è¦æ—¶å¯¹ç›®æ ‡ç«¯è¿›è¡Œè„±æ•ï¼ˆä»…æš´éœ² ID ä¸ç±»å‹ï¼‰</li>
</ul>
<h3>ç´¢å¼•ä¸æ€§èƒ½å»ºè®®</h3>
<ul>
<li>å¤åˆç´¢å¼•ï¼š<code>source(docType, docId, rowId) + type</code>ã€<code>target(docType, docId, rowId) + type</code></li>
<li>å¤§é‡è¾¹çš„åˆ†é¡µï¼šæ¸¸æ ‡åˆ†é¡µä¼˜å…ˆï¼›é¿å…ä¸€æ¬¡æ‹‰å–å…¨éƒ¨å…¥/å‡ºè¾¹</li>
<li>æ‰¹é‡æŸ¥è¯¢ï¼šæ”¯æŒ <code>POST /relations/query</code> ä»¥æ–‡æ¡£é›†åˆä¸ºè¾“å…¥ï¼Œè¿”å›èšåˆè®¡æ•°ä¸ç¤ºä¾‹è¾¹</li>
</ul>
<h3>ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="language-bash"># åˆ›å»ºè¡Œåˆ°è¡Œçš„å¼•ç”¨å…³ç³»ï¼ˆåœ¨ Request req-1 ä¸­ï¼‰
curl -X POST &#39;https://open.nexusbook.app/api/v1/relations?requestId=req-1&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -d &#39;{
    &quot;type&quot;: &quot;references&quot;,
    &quot;direction&quot;: &quot;uni&quot;,
    &quot;source&quot;: {&quot;docType&quot;: &quot;invoice&quot;, &quot;docId&quot;: &quot;inv-123&quot;, &quot;rowId&quot;: &quot;row-1&quot;},
    &quot;target&quot;: {&quot;docType&quot;: &quot;purchaseOrder&quot;, &quot;docId&quot;: &quot;po-456&quot;, &quot;rowId&quot;: &quot;row-99&quot;},
    &quot;metadata&quot;: {&quot;note&quot;: &quot;å‘ç¥¨è¡Œå¼•ç”¨è®¢è´§å•è¡Œ&quot;}
  }&#39;

# æŸ¥è¯¢æ–‡æ¡£çš„æ‰€æœ‰å‡ºè¾¹ï¼ˆæŒ‰ç±»å‹è¿‡æ»¤ï¼‰
curl &#39;https://open.nexusbook.app/api/v1/doc/inventory/inv-001/relations?type=contains&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;

# æŸ¥è¯¢æŒ‡å‘å½“å‰æ–‡æ¡£çš„å…¥è¾¹ï¼ˆæŒ‰è¡Œè¿‡æ»¤ï¼‰
curl &#39;https://open.nexusbook.app/api/v1/doc/product/prod-001/relations/inbound?rowId=row-42&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;
</code></pre>
<h3>å…³ç³»ç¤ºæ„å›¾</h3>
<div class="mermaid">flowchart LR
  DocA["Product(doc-123)"] -- depends_on --> DocB["Supplier(doc-456)"]
  RowA["Row(row-1)"] -- references --> RowB["Row(row-99)"]
  DocA -- contains --> RowA</div>
<h2>èšåˆæŸ¥è¯¢ï¼ˆDocBundleï¼‰</h2>
<h3>æ¦‚å¿µ</h3>
<p>ä¸€æ¬¡æ€§è·å–æ–‡æ¡£çš„å¤šä¸ªå±‚æ¬¡çš„æ•°æ®ï¼Œé¿å…å¤šæ¬¡è¯·æ±‚ã€‚</p>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>é¡µé¢åˆå§‹åŒ–ï¼šåŠ è½½æ–‡æ¡£çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯</li>
<li>æ–‡æ¡£é¢„è§ˆï¼šå¿«é€Ÿè·å–æ–‡æ¡£æ‘˜è¦</li>
<li>æ•°æ®å¯¼å‡ºï¼šæ”¶é›†å®Œæ•´çš„æ–‡æ¡£æ•°æ®</li>
</ul>
<h3>è¯·æ±‚ç¤ºä¾‹</h3>
<pre><code class="language-bash"># è·å–å®Œæ•´çš„è®¢è´§å•ä¿¡æ¯
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123?include=properties,metadata,views,data,comments,revisions,settings&amp;page=1&amp;pageSize=20&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;

# åªè·å–å…ƒæ•°æ®å’Œæ•°æ®
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123?include=metadata,data&amp;page=1&amp;pageSize=50&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;

# è·å–å±æ€§å’Œæœ€è¿‘çš„è¯„è®º/ä¿®è®¢
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123?include=properties,comments,revisions&amp;commentsLimit=5&amp;revisionsLimit=3&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;
</code></pre>
<h3>å“åº”ç¤ºä¾‹</h3>
<pre><code class="language-json">{
  &quot;properties&quot;: {
    &quot;id&quot;: &quot;prop-001&quot;,
    &quot;docId&quot;: &quot;order-123&quot;,
    &quot;properties&quot;: {
      &quot;orderTime&quot;: &quot;2024-12-01T10:00:00Z&quot;,
      &quot;store&quot;: &quot;Beijing Branch&quot;,
      &quot;amount&quot;: 5000.00,
      &quot;quantity&quot;: 50
    }
  },
  &quot;metadata&quot;: {
    &quot;id&quot;: &quot;meta-001&quot;,
    &quot;fields&quot;: [
      { &quot;id&quot;: &quot;productName&quot;, &quot;name&quot;: &quot;äº§å“åç§°&quot;, &quot;type&quot;: &quot;text&quot; },
      { &quot;id&quot;: &quot;quantity&quot;, &quot;name&quot;: &quot;æ•°é‡&quot;, &quot;type&quot;: &quot;number&quot; }
    ]
  },
  &quot;data&quot;: {
    &quot;items&quot;: [
      {
        &quot;id&quot;: &quot;row-001&quot;,
        &quot;values&quot;: [
          { &quot;fieldId&quot;: &quot;productName&quot;, &quot;value&quot;: { &quot;text&quot;: &quot;iPhone 15&quot; } },
          { &quot;fieldId&quot;: &quot;quantity&quot;, &quot;value&quot;: { &quot;number&quot;: 10 } }
        ]
      }
    ],
    &quot;pageSize&quot;: 20,
    &quot;totalItems&quot;: 100
  },
  &quot;comments&quot;: [
    {
      &quot;id&quot;: &quot;comment-001&quot;,
      &quot;target&quot;: { &quot;scope&quot;: &quot;document&quot; },
      &quot;content&quot;: &quot;è¯·å°½å¿«å¤„ç†&quot;
    }
  ],
  &quot;revisions&quot;: [
    {
      &quot;id&quot;: &quot;rev-002&quot;,
      &quot;version&quot;: 2,
      &quot;changes&quot;: [...],
      &quot;mergedBy&quot;: &quot;user-1&quot;
    }
  ]
}
</code></pre>
<h2>å·¥ä½œæµé›†æˆ</h2>
<h3>å®Œæ•´çš„è®¢è´§å·¥ä½œæµ</h3>
<div class="mermaid">flowchart LR
  A["åˆ›å»ºæ–‡æ¡£"] --> B["åˆå§‹åŒ– Properties/Metadata/Views"]
  B --> C["æ·»åŠ /æ›´æ–° Data"]
  C --> D["åä½œä¸è¯„è®º"]
  D --> E["åˆ›å»º Request(ååŒç¼–è¾‘)"]
  E --> F["å®¡æ‰¹"]
  F --> G["åˆå¹¶ç”Ÿæˆ Revision"]
  G --> H["å›æº¯ä¸å¯¹æ¯”"]</div>
<pre><code>1. åˆ›å»ºæ–‡æ¡£
   â”œâ”€ åˆå§‹åŒ– Propertiesï¼ˆè®¢å•æ—¶é—´ã€é—¨åº—ç­‰ï¼‰
   â”œâ”€ åˆ›å»º Metadataï¼ˆå­—æ®µå®šä¹‰ï¼‰
   â””â”€ åˆ›å»º Viewï¼ˆæ˜¾ç¤ºæ–¹å¼ï¼‰

2. æ·»åŠ æ•°æ®
   â”œâ”€ åˆ›å»º Rowï¼ˆäº§å“è¡Œï¼‰
   â”œâ”€ æ›´æ–° Rowï¼ˆä¿®æ”¹æ•°é‡/ä»·æ ¼ï¼‰
   â””â”€ å¯é€‰ï¼šåˆ›å»ºå¤šä¸ª Viewï¼ˆä¸åŒçš„è¿‡æ»¤è§†è§’ï¼‰

3. åä½œä¸è®¨è®º
   â”œâ”€ æ·»åŠ  Commentï¼ˆåœ¨è¡Œ/å•å…ƒæ ¼çº§åˆ«åé¦ˆï¼‰
   â”œâ”€ æåŠç›¸å…³äººå‘˜
   â””â”€ æ ‡è®°è¯„è®ºå·²è§£å†³

4. å˜æ›´ç®¡ç†
   â”œâ”€ ç”¨æˆ·ç¼–è¾‘æ•°æ®äº§ç”Ÿ ChangeOperation
   â”œâ”€ è‡ªåŠ¨ç”Ÿæˆä¿®è®¢è®°å½•æ¯ä¸ªæ“ä½œ
   â””â”€ Revision è®°å½•å®Œæ•´çš„ contributors

5. åˆå¹¶è¯·æ±‚
   â”œâ”€ åˆ›å»º Requestï¼ˆèšåˆæ‰€æœ‰å¾…åˆå¹¶å˜æ›´ï¼‰
   â”œâ”€ å®¡æ ¸ Requestï¼ˆæŸ¥çœ‹ diffï¼‰
   â””â”€ åˆå¹¶æ—¶ï¼š
      â”œâ”€ ç”Ÿæˆ Revisionï¼ˆå†»ç»“æ‰€æœ‰æ“ä½œï¼‰
      â”œâ”€ è®°å½• contributorsï¼ˆæ‰€æœ‰ç¼–è¾‘è€…ï¼‰
      â””â”€ æ›´æ–° generatedRevisionId

6. å›æº¯
   â”œâ”€ æŸ¥çœ‹ Revision å†å²
   â”œâ”€ æ¯”å¯¹ä¸¤ä¸ªç‰ˆæœ¬å·®å¼‚
   â”œâ”€ æŸ¥çœ‹è°æ”¹äº†ä»€ä¹ˆ
   â””â”€ å¿…è¦æ—¶å›æ»šåˆ°ä¹‹å‰ç‰ˆæœ¬
</code></pre>
<h2>æƒé™æ¨¡å‹ä¸å®¡æ‰¹å·¥ä½œæµ</h2>
<ul>
<li>æƒé™åŸŸï¼ˆScopesï¼‰ï¼š<code>doc:read/doc:write/data:read/data:write/views:manage/comments:write/approvals:manage/requests:manage</code>ã€‚</li>
<li>è§’è‰²ç¤ºä¾‹ï¼šReader/Editor/Approver/Adminï¼Œä¸åŒè§’è‰²æ˜ å°„ä¸åŒ Scopesã€‚</li>
<li>å®¡æ‰¹ç­–ç•¥ï¼šä¸²ç­¾/å¹¶ç­¾/æ¡ä»¶ç­¾ï¼›é€šè¿‡ <code>approval_*</code> äº‹ä»¶ä¸ Webhook é€šçŸ¥å¤–éƒ¨ç³»ç»Ÿã€‚</li>
<li>Request ä¸ Revisionï¼šæ¯ä¸ª Request åˆå¹¶åç”Ÿæˆä¸€ä¸ª Revisionï¼Œæ‹’ç»åˆ™ä¿ç•™ä¸ºè‰ç¨¿æˆ–å…³é—­ï¼›Diff å¯¹æ¯”åŸºäº ChangeOperationã€‚</li>
<li>å¹¶å‘æ§åˆ¶ï¼šè¡Œçº§ version ä¹è§‚é”ï¼›é”å®šæœºåˆ¶ç”¨äºç»†ç²’åº¦åä½œï¼ˆç»“åˆå®æ—¶ååŒï¼‰ã€‚</li>
</ul>
<h2>ä½¿ç”¨åœºæ™¯è¯¦è§£</h2>
<h3>åœºæ™¯1ï¼šè®¢è´§å•ï¼ˆPurchase Orderï¼‰</h3>
<h4>å±æ€§ï¼ˆPropertiesï¼‰</h4>
<pre><code class="language-json">{
  &quot;orderTime&quot;: &quot;2024-12-01T10:00:00Z&quot;,
  &quot;store&quot;: &quot;Beijing Branch&quot;,
  &quot;totalAmount&quot;: 5000.00,
  &quot;totalQuantity&quot;: 50,
  &quot;status&quot;: &quot;pending&quot;,
  &quot;priority&quot;: &quot;high&quot;,
  &quot;notes&quot;: &quot;Urgent delivery required&quot;
}
</code></pre>
<h4>å…ƒæ•°æ®ï¼ˆMetadataï¼‰</h4>
<pre><code class="language-json">{
  &quot;fields&quot;: [
    { &quot;id&quot;: &quot;productName&quot;, &quot;name&quot;: &quot;äº§å“åç§°&quot;, &quot;type&quot;: &quot;text&quot; },
    { &quot;id&quot;: &quot;quantity&quot;, &quot;name&quot;: &quot;æ•°é‡&quot;, &quot;type&quot;: &quot;number&quot; },
    { &quot;id&quot;: &quot;price&quot;, &quot;name&quot;: &quot;å•ä»·&quot;, &quot;type&quot;: &quot;number&quot; },
    { &quot;id&quot;: &quot;total&quot;, &quot;name&quot;: &quot;å°è®¡&quot;, &quot;type&quot;: &quot;number&quot; }
  ]
}
</code></pre>
<h4>æ•°æ®ï¼ˆDataï¼‰</h4>
<pre><code>| äº§å“åç§°      | æ•°é‡ | å•ä»·   | å°è®¡    |
|-------------|------|--------|---------|
| iPhone 15   | 10   | 799.99 | 7999.90 |
| iPad Pro    | 5    | 1099.99| 5499.95 |
| MacBook Air | 2    | 1999.99| 3999.98 |
</code></pre>
<h4>å·¥ä½œæµ</h4>
<ol>
<li>è®¢å•å‘˜åˆ›å»ºè®¢è´§å•ï¼ˆåˆå§‹åŒ– Propertiesï¼‰</li>
<li>å¤šä¸ªé‡‡è´­å‘˜æ·»åŠ äº§å“è¡Œï¼ˆå¢åŠ  Dataï¼‰</li>
<li>ç»ç†å¯¹æŸäº›è¡Œæ·»åŠ è¯„è®ºï¼Œæå‡ºä¿®æ”¹æ„è§ï¼ˆCommentï¼‰</li>
<li>é‡‡è´­å‘˜æ ¹æ®åé¦ˆä¿®æ”¹æ•°æ®ï¼ˆChangeOperationï¼‰</li>
<li>ç»ç†å®¡æ ¸å¹¶åˆå¹¶ï¼ˆRequest â†’ Revisionï¼‰</li>
<li>è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„ä¿®è®¢å†å²ï¼ˆRevision with all ChangeOperationsï¼‰</li>
</ol>
<h3>åœºæ™¯2ï¼šå‘ç¥¨ï¼ˆInvoiceï¼‰</h3>
<h4>å±æ€§ï¼ˆPropertiesï¼‰</h4>
<pre><code class="language-json">{
  &quot;invoiceNumber&quot;: &quot;INV-2024-001&quot;,
  &quot;issueDate&quot;: &quot;2024-12-01&quot;,
  &quot;dueDate&quot;: &quot;2025-01-01&quot;,
  &quot;totalAmount&quot;: 10000.00,
  &quot;taxRate&quot;: 0.13,
  &quot;taxAmount&quot;: 1300.00,
  &quot;paymentStatus&quot;: &quot;pending&quot;,
  &quot;paymentMethod&quot;: &quot;bank_transfer&quot;
}
</code></pre>
<h4>å…ƒæ•°æ®ï¼ˆMetadataï¼‰</h4>
<pre><code class="language-json">{
  &quot;fields&quot;: [
    { &quot;id&quot;: &quot;description&quot;, &quot;name&quot;: &quot;æè¿°&quot;, &quot;type&quot;: &quot;text&quot; },
    { &quot;id&quot;: &quot;quantity&quot;, &quot;name&quot;: &quot;æ•°é‡&quot;, &quot;type&quot;: &quot;number&quot; },
    { &quot;id&quot;: &quot;unitPrice&quot;, &quot;name&quot;: &quot;å•ä»·&quot;, &quot;type&quot;: &quot;number&quot; },
    { &quot;id&quot;: &quot;lineTotal&quot;, &quot;name&quot;: &quot;é‡‘é¢&quot;, &quot;type&quot;: &quot;number&quot; }
  ]
}
</code></pre>
<h3>åœºæ™¯3ï¼šåº“å­˜è¡¨ï¼ˆInventoryï¼‰</h3>
<h4>å±æ€§ï¼ˆPropertiesï¼‰</h4>
<pre><code class="language-json">{
  &quot;warehouseId&quot;: &quot;warehouse-001&quot;,
  &quot;warehouseName&quot;: &quot;Beijing Warehouse&quot;,
  &quot;lastUpdated&quot;: &quot;2024-12-01T10:00:00Z&quot;,
  &quot;totalItems&quot;: 1000,
  &quot;totalValue&quot;: 50000.00
}
</code></pre>
<h4>å…ƒæ•°æ®ï¼ˆMetadataï¼‰</h4>
<pre><code class="language-json">{
  &quot;fields&quot;: [
    { &quot;id&quot;: &quot;sku&quot;, &quot;name&quot;: &quot;SKU&quot;, &quot;type&quot;: &quot;text&quot; },
    { &quot;id&quot;: &quot;productName&quot;, &quot;name&quot;: &quot;äº§å“åç§°&quot;, &quot;type&quot;: &quot;text&quot; },
    { &quot;id&quot;: &quot;quantity&quot;, &quot;name&quot;: &quot;æ•°é‡&quot;, &quot;type&quot;: &quot;number&quot; },
    { &quot;id&quot;: &quot;lastRestockDate&quot;, &quot;name&quot;: &quot;æœ€åè¡¥è´§æ—¶é—´&quot;, &quot;type&quot;: &quot;date&quot; },
    { &quot;id&quot;: &quot;status&quot;, &quot;name&quot;: &quot;çŠ¶æ€&quot;, &quot;type&quot;: &quot;select&quot; }
  ]
}
</code></pre>
<h2>å‘½åä¸IDè§„èŒƒ</h2>
<ul>
<li>æ–‡æ¡£ IDï¼š<code>doc-{type}-{ulid}</code>ï¼Œä¾‹å¦‚ <code>doc-product-01H...</code>ã€‚</li>
<li>è¡Œ IDï¼š<code>row-{ulid}</code>ï¼›å­—æ®µ ID ä½¿ç”¨ <code>snake_case</code> æˆ– <code>camelCase</code>ï¼Œä¸ Metadata ä¿æŒä¸€è‡´ã€‚</li>
<li>è§†å›¾ IDï¼š<code>view-{ulid}</code>ï¼›è¯„è®º IDï¼š<code>comment-{ulid}</code>ï¼›ä¿®è®¢ IDï¼š<code>rev-{ulid}</code>ï¼›è¯·æ±‚ IDï¼š<code>req-{ulid}</code>ã€‚</li>
<li>é™„ä»¶ IDï¼š<code>att-{ulid}</code>ï¼›å…³ç³» IDï¼š<code>rel-{ulid}</code>ã€‚</li>
<li>å»ºè®®ä½¿ç”¨ ULID/UUIDï¼Œé¿å…è¯­ä¹‰åŒ– ID æ³„éœ²ä¸šåŠ¡ä¿¡æ¯ã€‚</li>
</ul>
<h2>æœ€ä½³å®è·µ</h2>
<h3>1. å±æ€§è®¾è®¡</h3>
<ul>
<li>âœ… ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼ˆcamelCaseï¼‰</li>
<li>âœ… å±æ€§ååº”è¯¥è‡ªæè¿°ï¼ˆ<code>orderTime</code> è€Œä¸æ˜¯ <code>time</code>ï¼‰</li>
<li>âœ… ç›¸å…³å±æ€§å¯ä»¥åˆ†ç»„ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ<code>shipping_address</code>, <code>billing_address</code>ï¼‰</li>
<li>âŒ é¿å…è¿‡äºå¤æ‚çš„åµŒå¥—ç»“æ„</li>
<li>âŒ é¿å…åœ¨å±æ€§ä¸­å­˜å‚¨åˆ—è¡¨æ•°æ®ï¼ˆåº”è¯¥ç”¨ Data è¡Œï¼‰</li>
</ul>
<h3>2. å…ƒæ•°æ®è®¾è®¡</h3>
<ul>
<li>âœ… å­—æ®µID åº”è¯¥å¯¹åº”æ•°æ®ä¸­çš„å®é™…å­—æ®µ</li>
<li>âœ… æä¾›æ¸…æ™°çš„å­—æ®µè¯´æ˜å’ŒéªŒè¯è§„åˆ™</li>
<li>âœ… æ ¹æ®å­—æ®µç±»å‹è®¾ç½®é€‚å½“çš„éªŒè¯</li>
<li>âŒ é¿å…é¢‘ç¹ä¿®æ”¹å…ƒæ•°æ®ï¼ˆä¼šå½±å“å·²æœ‰æ•°æ®ï¼‰</li>
<li>âŒ ä¸è¦åœ¨å…ƒæ•°æ®ä¸­å­˜å‚¨é»˜è®¤å€¼ï¼ˆåº”åœ¨åˆ›å»ºæ•°æ®æ—¶å¤„ç†ï¼‰</li>
</ul>
<h3>3. æ•°æ®æ“ä½œ</h3>
<ul>
<li>âœ… ä¼˜å…ˆä½¿ç”¨æ‰¹é‡æ“ä½œï¼ˆbatch-create/update/deleteï¼‰</li>
<li>âœ… æä¾›æœ‰æ„ä¹‰çš„ç‰ˆæœ¬å·ä»¥æ”¯æŒä¹è§‚é”</li>
<li>âœ… å¯¹å¤§é‡ä¿®æ”¹ä½¿ç”¨åˆå¹¶è¯·æ±‚ï¼ˆRequestï¼‰</li>
<li>âŒ é¿å…é¢‘ç¹çš„å•è¡Œæ“ä½œï¼ˆåº”è¯¥æ‰¹é‡å¤„ç†ï¼‰</li>
<li>âŒ ä¸è¦ä¾èµ–ä¿®è®¢æ¥æ¢å¤é”™è¯¯æ•°æ®ï¼ˆåº”è¯¥ä½¿ç”¨é€‚å½“çš„éªŒè¯ï¼‰</li>
</ul>
<h3>4. è¯„è®ºå’Œåä½œ</h3>
<ul>
<li>âœ… å¯¹ä¸åŒä½ç½®çš„è¯„è®ºä½¿ç”¨ç²¾ç¡®çš„ target å®šä½</li>
<li>âœ… ä½¿ç”¨ mentionsï¼ˆ@æåŠï¼‰æ¥å¸å¼•æ³¨æ„</li>
<li>âœ… åŠæ—¶æ ‡è®°å·²è§£å†³çš„è¯„è®º</li>
<li>âŒ ä¸è¦åœ¨è¯„è®ºä¸­ä¿å­˜ç»“æ„åŒ–æ•°æ®ï¼ˆåº”è¯¥ä¿®æ”¹å®é™…æ•°æ®ï¼‰</li>
<li>âŒ é¿å…è¿‡åº¦çš„è¯„è®ºï¼ˆåº”è¯¥åœ¨é—®é¢˜è§£å†³åæ¸…ç†ï¼‰</li>
</ul>
<h3>5. ç‰ˆæœ¬å’Œå®¡è®¡</h3>
<ul>
<li>âœ… å¯¹é‡è¦çš„ä¿®æ”¹åˆ›å»ºæœ‰æ„ä¹‰çš„ä¿®è®¢è¯´æ˜</li>
<li>âœ… å®šæœŸæŸ¥çœ‹ä¿®è®¢å†å²ä»¥å®¡è®¡å˜æ›´</li>
<li>âœ… ä½¿ç”¨ä¿®è®¢æ¥è¿½è¸ªæ•°æ®çš„æ¼”å˜è¿‡ç¨‹</li>
<li>âŒ ä¸è¦æ»¥ç”¨å›æ»šåŠŸèƒ½ï¼ˆåº”è¯¥æ˜ç¡®ä¿®æ”¹è€Œä¸æ˜¯é¢‘ç¹å›æ»šï¼‰</li>
<li>âŒ é¿å…åˆ é™¤é‡è¦çš„ä¿®è®¢è®°å½•</li>
</ul>
<h2>æ€§èƒ½è€ƒè™‘</h2>
<h3>åˆ†é¡µå’Œé™åˆ¶</h3>
<pre><code class="language-bash"># å¯¹äºå¤§é‡æ•°æ®ï¼Œä½¿ç”¨åˆ†é¡µ
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123/rows?page=1&amp;pageSize=100&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;

# åœ¨èšåˆæŸ¥è¯¢ä¸­é™åˆ¶è¯„è®º/ä¿®è®¢æ•°é‡
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123?include=comments,revisions&amp;commentsLimit=10&amp;revisionsLimit=5&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;
</code></pre>
<h3>é€‰æ‹©éœ€è¦çš„æ•°æ®</h3>
<pre><code class="language-bash"># åªè·å–å¿…è¦çš„æ•°æ®éƒ¨åˆ†
curl &#39;https://open.nexusbook.app/api/v1/doc/purchaseOrder/order-123?include=properties,metadata&#39; \
  -H &#39;Authorization: Bearer TOKEN&#39;
# é¿å…è·å–æ•´ä¸ªæ•°æ®é›†
</code></pre>
<h3>ç¼“å­˜ç­–ç•¥</h3>
<ul>
<li>å…ƒæ•°æ®å˜åŒ–è¾ƒå°‘ï¼Œå¯ä»¥é•¿æœŸç¼“å­˜</li>
<li>æ•°æ®å’Œè¯„è®ºå˜åŒ–é¢‘ç¹ï¼Œè€ƒè™‘çŸ­æœŸç¼“å­˜</li>
<li>ä¿®è®¢é€šå¸¸æ˜¯ä¸å¯å˜çš„ï¼Œå¯ä»¥æ°¸ä¹…ç¼“å­˜</li>
</ul>
<h2>æ€»ç»“</h2>
<p>NexusBook çš„æ–‡æ¡£æ¨¡å‹é€šè¿‡<strong>åˆ†å±‚è®¾è®¡</strong>æä¾›äº†é«˜åº¦çš„çµæ´»æ€§ï¼š</p>
<ul>
<li><strong>Properties</strong> - æ–‡æ¡£çš„å…ƒä¿¡æ¯ï¼ˆè®¢å•æ—¶é—´ã€é—¨åº—ç­‰ï¼‰</li>
<li><strong>Metadata</strong> - å­—æ®µå®šä¹‰ï¼ˆç»“æ„ï¼‰</li>
<li><strong>Data</strong> - å®é™…çš„æ•°æ®è¡Œï¼ˆå†…å®¹ï¼‰</li>
<li><strong>Views</strong> - å±•ç¤ºæ–¹å¼ï¼ˆè§†è§’ï¼‰</li>
<li><strong>Comments</strong> - ç²¾ç¡®ä½ç½®çš„åä½œè®¨è®º</li>
<li><strong>Revisions</strong> - å®Œæ•´çš„å˜æ›´å†å²å’Œç‰ˆæœ¬æ§åˆ¶</li>
<li><strong>Settings</strong> - æ–‡æ¡£é…ç½®å’Œæƒé™</li>
</ul>
<p>è¿™ä¸ªè®¾è®¡æ”¯æŒï¼š
âœ… ä¸åŒç±»å‹çš„æ–‡æ¡£ï¼ˆè®¢è´§å•ã€å‘ç¥¨ã€åº“å­˜ç­‰ï¼‰
âœ… å¤šäººåä½œå’Œå®¡æ‰¹å·¥ä½œæµ
âœ… å®Œæ•´çš„å®¡è®¡è·Ÿè¸ª
âœ… çµæ´»çš„æ•°æ®æŸ¥è¯¢å’Œå±•ç¤º
âœ… ç‰ˆæœ¬æ§åˆ¶å’Œæ•°æ®æ¢å¤
âœ… ç²¾ç¡®ä½ç½®çš„è¯„è®ºå’Œåé¦ˆ</p>

                </article>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 NexusBook. åŸºäº TypeSpec å®šä¹‰å¹¶ç”Ÿæˆ OpenAPI 3.0 è§„èŒƒã€‚</p>
            </div>
        </footer>
    </div>
</body>
</html>